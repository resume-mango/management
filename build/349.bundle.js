"use strict";(self.webpackChunkmanagement=self.webpackChunkmanagement||[]).push([[349],{4228:(e,n,s)=>{s.d(n,{Z:()=>r});var t=s(7294),a=s(5893);const r=function(e){var n=e.size,s=e.color,r=e.className;return(0,a.jsx)(t.Fragment,{children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n||"1rem",className:r||"",height:n||"1rem",fill:"none",children:(0,a.jsx)("path",{fill:s||"#898989",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})})})}},9349:(e,n,s)=>{s.r(n),s.d(n,{default:()=>T});var t,a,r,i,c,d=s(7294),l=s(6974),o=s(168),m=s(885),u=s(7484),h=s.n(u),p=s(8804),x=s(2790),j=s(8614),g=s(8370),f=s(8739),b=s(6605),y=s(5978),v=s(5438),_=s(3360),N=s(3394),Z=s(5893),w=[{label:"User ID",name:"user_id"},{label:"Payment ID",name:"invoice_id"},{label:"Customer ID",name:"customer"},{label:"Subscription ID",name:"subscription"}];const P=function(){var e=(0,d.useState)(0),n=(0,m.Z)(e,2),s=n[0],t=n[1],a=(0,d.useState)(""),r=(0,m.Z)(a,2),i=r[0],c=r[1],o=(0,d.useState)(w[0].name),u=(0,m.Z)(o,2),p=u[0],P=u[1],k=(0,d.useState)(void 0),z=(0,m.Z)(k,2),D=z[0],C=z[1],A=(0,d.useState)("all_list"),L=(0,m.Z)(A,2),V=L[0],R=L[1],$=(0,d.useState)(""),H=(0,m.Z)($,2),q=H[0],E=H[1],T=(0,d.useState)(""),U=(0,m.Z)(T,2),B=U[0],O=U[1],W=(0,l.s0)(),J={limit:25};D&&(J.q=D),B&&(J.start_after=B),q&&(J.next_page=q);var G=(0,b._P)(s,V,J),K=G.data,Q=G.isLoading,X=G.isError;(0,d.useEffect)((function(){K&&(K.start_after&&(R("all_list"),O(K.start_after)),K.next_page&&(R("search_list"),E(K.next_page)))}),[K]),(0,d.useEffect)((function(){c("")}),[p]);var ee=function(e){"next"===e&&t((function(e){return e+1})),"prev"===e&&t((function(e){return e-1}))},ne=(0,Z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,Z.jsx)("h3",{children:"No Payments Found!"})}),se=(0,Z.jsxs)(_.u,{children:[(0,Z.jsx)(_.$j,{type:"primary",size:"2rem"}),(0,Z.jsx)(_.xg,{color:"#f08438",children:"Loading"})]});return(0,Z.jsxs)(d.Fragment,{children:[(0,Z.jsx)(j.Z,{title:"Payments",border:!0}),(0,Z.jsx)(I,{children:X?(0,Z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,Z.jsx)("h3",{children:"Failed to load Payments!"})}):Q&&0===s?se:(0,Z.jsxs)(d.Fragment,{children:[(0,Z.jsxs)(M,{children:[(0,Z.jsx)("div",{className:"action-item",children:(0,Z.jsx)(g.Z,{placeholder:"customer"===p?"eg: cus_Li9Ymb5d9o2wPI":"subscription"===p?"eg: sub_1L0qZEIh2DuAq8sftOrbrsAm":"invoice_id"===p?"eg: in_1L1FTHIh2DuAq8sfNZZiFmJM":"user_id"===p?"eg: 61c78fea0355ed7123fe0700":"Search",value:i,setValue:c,handleSubmit:function(){0===i.length?C(""):C(function(e){switch(e){case"user_id":return'user_id:"'.concat(i,'"');case"customer":return'customer:"'.concat(i,'"');case"subscription":return'subscription:"'.concat(i,'"');case"invoice_id":return'invoice_id:"'.concat(i,'"');default:return}}(p))}})}),(0,Z.jsx)("div",{className:"action-item",children:(0,Z.jsx)(f.Z,{name:"Search By",options:w,value:p,setValue:P})}),(0,Z.jsx)("div",{className:"action-item",children:(0,Z.jsxs)(v.z,{btnType:"ghost",size:"lg",width:"100%",onClick:function(){return P(w[0].name),c(""),void C(void 0)},children:[(0,Z.jsx)(x.Z,{size:"0.7rem"}),(0,Z.jsx)("span",{style:{marginLeft:"0.5rem"},children:"Reset"})]})})]}),(0,Z.jsxs)(d.Fragment,{children:[(0,Z.jsxs)(N.bw,{children:[(0,Z.jsx)("thead",{children:(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("th",{style:{width:"auto"},children:"ID"}),(0,Z.jsx)("th",{style:{width:"15%"},children:"Plan"}),(0,Z.jsx)("th",{style:{width:"10%"},children:"Amount"}),(0,Z.jsx)("th",{style:{width:"15%"},children:"Status"}),(0,Z.jsx)("th",{style:{width:"18%"},children:"Card"}),(0,Z.jsx)("th",{style:{width:"18%"},children:"Date"})]})}),K&&K.items&&K.items.length>0&&(0,Z.jsx)("tbody",{children:K.items.map((function(e,n){return(0,Z.jsxs)("tr",{onClick:function(){return W("/payments/".concat(e.id))},children:[(0,Z.jsx)("td",{children:e.id||"-"}),(0,Z.jsx)("td",{className:"capitalize",children:e.plan_name||"-"}),(0,Z.jsxs)("td",{children:["$",e.amount||"0.00","Â ",e.currency&&e.currency]}),(0,Z.jsx)("td",{className:"capitalize",children:e.refunded?(0,Z.jsx)(F,{children:(0,Z.jsx)(y.C,{type:"ghost",size:"sm",children:"Refunded"})}):e.amount_refunded>0?(0,Z.jsx)(F,{children:(0,Z.jsx)(y.C,{type:"ghost",size:"sm",children:"Partial Refund"})}):(0,Z.jsx)(y.C,{size:"sm",type:"succeeded"===e.status?"success":"cancelled"===e.status?"ghost":"failed"===e.status?"danger":"info",children:e.status})}),(0,Z.jsx)("td",{children:e.method.brand&&e.method.last4&&(0,Z.jsxs)(S,{children:[e.method.brand&&e.method.brand,(0,Z.jsx)("span",{className:"dot"}),(0,Z.jsx)("span",{className:"dot"}),(0,Z.jsx)("span",{className:"dot"}),(0,Z.jsx)("span",{className:"dot"}),(0,Z.jsx)("span",{className:"dot"}),e.method.last4]})||"card"}),(0,Z.jsx)("td",{children:h()(e.date).format("DD MMM YYYY, hh:mm a")})]},n)}))})]}),Q&&0!==s&&se,K&&0===K.items.length&&ne,K&&K.items.length>0&&(0,Z.jsxs)(Y,{children:[(0,Z.jsx)(v.z,{btnType:"secondary",disabled:0===s,onClick:function(){return ee("prev")},children:"Previous"}),(0,Z.jsx)(v.z,{btnType:"secondary",disabled:!K.has_more,onClick:function(){return ee("next")},children:"Next"})]})]})]})})]})};var k,z,D,C,I=p.ZP.div(t||(t=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  position: relative;\n  margin-bottom: 3rem;\n"]))),M=p.ZP.div(a||(a=(0,o.Z)(["\n  display: grid;\n  grid-template-columns: 60% 30% 10%;\n  padding: 1.5rem;\n  .action-item {\n    &:not(:last-child) {\n      margin-right: 1rem;\n    }\n  }\n"]))),S=p.ZP.div(r||(r=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  text-transform: capitalize;\n  .dot {\n    width: 4px;\n    height: 4px;\n    border-radius: 50%;\n    background-color: #777;\n    margin-right: 2px;\n    &:first-child {\n      margin-left: 10px;\n    }\n    &:last-child {\n      margin-right: 5px;\n    }\n  }\n"]))),F=p.ZP.div(i||(i=(0,o.Z)(["\n  display: block;\n  align-items: center;\n  .redund-amt {\n    display: block;\n    font-size: 0.7rem;\n    margin-top: 0.3rem;\n  }\n"]))),Y=p.ZP.div(c||(c=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n\n  button {\n    width: fit-content;\n    padding: 0 1rem;\n    margin: 0 1rem;\n  }\n"]))),A=s(9711),L=s(3173),V=s(4228);const R=function(){var e=(0,l.UO)().payment_id,n=(0,l.s0)(),s=(0,b.Rt)(e||"",!!e),t=s.data,a=s.isLoading,r=s.isError;return(0,Z.jsx)(d.Fragment,{children:r?(0,Z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,Z.jsx)("h3",{children:"Failed to load subscription!"})}):a?(0,Z.jsxs)(_.u,{children:[(0,Z.jsx)(_.$j,{type:"primary",size:"2rem"}),(0,Z.jsx)(_.xg,{color:"#f08438",children:"Loading"})]}):t?(0,Z.jsxs)($,{children:[(0,Z.jsx)(v.z,{btnType:"ghost",size:"lg",style:{width:"fit-content",padding:"0 1rem",marginBottom:"1rem"},onClick:function(){return n("/payments")},"data-test-id":"go-back",children:(0,Z.jsx)(L.Z,{size:"1.4rem"})}),(0,Z.jsxs)(d.Fragment,{children:[(0,Z.jsxs)(E,{children:[(0,Z.jsxs)("div",{className:"heading",children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("p",{style:{margin:0},children:"PAYMENTS"}),(0,Z.jsxs)("h2",{children:["$",t.payment_details.amount||0,t.payment_details.currency&&t.payment_details.currency.toUpperCase()]})]}),(0,Z.jsx)(y.C,{type:"succeeded"===t.status?"success":"pending"===t.status?"primary":"ghost",size:"md",children:t.status})]}),(0,Z.jsx)("div",{})]}),(0,Z.jsxs)(H,{children:[(0,Z.jsxs)("div",{className:"info-item",children:[(0,Z.jsx)("p",{className:"info-item-label",children:"Created"}),(0,Z.jsx)("p",{children:t.date?h()(t.date).format("DD MMM YYYY"):"-"})]}),(0,Z.jsxs)("div",{className:"info-item",children:[(0,Z.jsx)("p",{className:"info-item-label",children:"Customer"}),(0,Z.jsx)("p",{children:t.email&&t.provider_id?(0,Z.jsxs)(A.rU,{to:"/users/".concat(t.provider_id,"/details"),className:"ref-link",children:[t.email," ",(0,Z.jsx)(V.Z,{})]}):"-"})]}),(0,Z.jsxs)("div",{className:"info-item",children:[(0,Z.jsx)("p",{className:"info-item-label",children:"Purchased"}),(0,Z.jsx)("p",{children:t.subscription_refrence_id&&t.subscription_name?(0,Z.jsxs)(A.rU,{to:"/subscriptions/".concat(t.subscription_refrence_id),className:"ref-link capitalize",children:[t.subscription_name," plan ",(0,Z.jsx)(V.Z,{})]}):"-"})]})]}),(0,Z.jsx)("h4",{className:"sub-heading-border",children:"References"}),(0,Z.jsxs)(q,{children:[(0,Z.jsxs)("div",{className:"sub-item",children:[(0,Z.jsx)("p",{children:"Invoice ID"}),(0,Z.jsx)("p",{className:"sub-value",children:t.references.invoice_id||"-"}),(0,Z.jsx)("p",{children:"Payment Intent ID"}),(0,Z.jsx)("p",{className:"sub-value",children:t.references.payment_intent_id||"-"}),(0,Z.jsx)("p",{children:"Charge ID "}),(0,Z.jsx)("p",{className:"sub-value",children:t.references.charge_id||"-"})]}),(0,Z.jsxs)("div",{className:"sub-item",children:[(0,Z.jsx)("p",{children:"User ID"}),(0,Z.jsx)("p",{className:"sub-value",children:t.user_id||"-"}),(0,Z.jsx)("p",{children:"Customer ID"}),(0,Z.jsx)("p",{className:"sub-value",children:t.references.customer_id||"-"}),(0,Z.jsx)("p",{children:"Subscription ID"}),(0,Z.jsx)("p",{className:"sub-value",children:t.references.subscription_id||"-"})]})]}),(0,Z.jsx)("h4",{className:"sub-heading-border",children:"Payment Details"}),(0,Z.jsxs)(q,{children:[(0,Z.jsxs)("div",{className:"sub-item",children:[(0,Z.jsx)("p",{children:"Plan"}),(0,Z.jsx)("p",{className:"sub-value",children:t.payment_details.plan_name}),(0,Z.jsx)("p",{children:"Amount"}),(0,Z.jsxs)("p",{className:"sub-value",children:["$",t.payment_details.amount]}),0!==t.payment_details.amount_refunded&&(0,Z.jsxs)(d.Fragment,{children:[(0,Z.jsx)("p",{children:"Refunded"}),(0,Z.jsxs)("p",{className:"sub-value",children:["$",t.payment_details.amount_refunded||0]})]}),(0,Z.jsx)("p",{children:"Stripe Fee"}),(0,Z.jsxs)("p",{className:"sub-value",children:["$",t.payment_details.stripe_fee]}),(0,Z.jsx)("p",{children:"Net"}),(0,Z.jsx)("b",{className:"sub-value ".concat(t.payment_details.net_amount<0&&"negative-sign"),children:t.payment_details.net_amount>0?"$".concat(t.payment_details.net_amount):"$".concat(Math.abs(t.payment_details.net_amount))})]}),(0,Z.jsxs)("div",{className:"sub-item",children:[(0,Z.jsx)("p",{children:"Payment Method"}),(0,Z.jsxs)("p",{className:"sub-value",children:[t.payment_method.brand," ",t.payment_method.last4]}),(0,Z.jsx)("p",{children:"Date"}),(0,Z.jsx)("p",{className:"sub-value",children:t.date?h()(t.date).format("DD MMM YYYY, hh:mm a"):"-"}),(0,Z.jsx)("p",{children:" Address"}),(0,Z.jsxs)("p",{className:"sub-value",children:[t.payee_address.line1&&"".concat(t.payee_address.line1,", "),t.payee_address.line2&&"".concat(t.payee_address.line2,", "),t.payee_address.city&&"".concat(t.payee_address.city,", "),t.payee_address.state&&"".concat(t.payee_address.state," "),t.payee_address.postal_code&&"".concat(t.payee_address.postal_code," "),t.payee_address.country&&"".concat(t.payee_address.country)]})]})]})]})]}):null})};var $=p.ZP.div(k||(k=(0,o.Z)(["\n  padding: 1.5rem;\n  .sub-heading-wrapper {\n    h4 {\n      margin-bottom: 0;\n    }\n    p {\n      margin-bottom: 1rem;\n    }\n  }\n  .sub-heading-border {\n    border-bottom: 1px solid #e7e7e7;\n    padding-bottom: 1rem;\n  }\n"]))),H=p.ZP.div(z||(z=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  margin-bottom: 3rem;\n  p {\n    margin: 0;\n    line-height: 1.7;\n  }\n  .info-item-label {\n    margin-bottom: 0.5rem;\n    font-weight: 700;\n    color: ",";\n  }\n  .info-item {\n    &:not(:last-child) {\n      margin-right: 1.5rem;\n      padding-right: 1.5rem;\n      border-right: 1px solid #e7e7e7;\n    }\n  }\n"])),(function(e){return e.theme.colors.primary})),q=p.ZP.div(D||(D=(0,o.Z)(["\n  display: grid;\n  grid-template-columns: repeat(2, 50%);\n  max-width: 1000px;\n  margin-bottom: 4rem;\n  .sub-item {\n    display: grid;\n    grid-template-columns: minmax(75px, 170px) auto;\n    height: fit-content;\n    align-items: flex-start;\n    padding-right: 2rem;\n\n    .sub-value {\n      color: #878787;\n    }\n    .negative-sign {\n      position: relative;\n      &::before {\n        content: '- ';\n        position: absolute;\n        left: -10px;\n      }\n    }\n\n    p,\n    b {\n      font-size: 0.875rem;\n      color: inherit;\n      word-wrap: break-word;\n      word-break: break-all;\n      line-height: 2.5;\n      margin: 0;\n    }\n  }\n"]))),E=p.ZP.div(C||(C=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n  .heading {\n    p {\n      display: block;\n      padding-bottom: 0.7rem;\n      font-weight: bold;\n      color: #878787;\n    }\n    display: flex;\n    align-items: flex-end;\n    padding-top: 1rem;\n\n    h2 {\n      margin-right: 1rem;\n      margin-bottom: 0;\n      text-transform: capitalize;\n    }\n    margin-bottom: 1rem;\n  }\n  button {\n    margin-right: 2rem;\n  }\n"])));const T=function(){return(0,Z.jsx)(d.Fragment,{children:(0,Z.jsxs)(l.Z5,{children:[(0,Z.jsx)(l.AW,{path:"/",element:(0,Z.jsx)(P,{})}),(0,Z.jsx)(l.AW,{path:"/:payment_id",element:(0,Z.jsx)(R,{})})]})})}},6605:(e,n,s)=>{s.d(n,{Rj:()=>l,Rt:()=>m,_P:()=>o});var t=s(5861),a=s(7757),r=s.n(a),i=s(9669),c=s.n(i),d=s(3106),l=function(e,n,s){var a=function(){var e=(0,t.Z)(r().mark((function e(s){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("/management/payments/user/".concat(s),{params:{page:n}});case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,d.Z)(["payments",{userId:e,page:n}],(function(){return a(e)}),s)},o=function(e,n,s,a){var i=function(){var e=(0,t.Z)(r().mark((function e(){var n,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("/management/payments/search",{params:s});case 2:return n=e.sent,t=n.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.Z)(["payments",{q:s.q,cacheRef:n,page:e}],(function(){return i()}),a)},m=function(e,n){var s=function(){var e=(0,t.Z)(r().mark((function e(n){var s,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("/management/payments/".concat(n));case 2:return s=e.sent,t=s.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,d.Z)(["payment",e],(function(){return s(e)}),n)}}}]);
//# sourceMappingURL=349.bundle.js.map