{"version":3,"file":"411.bundle.js","mappings":"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","sources":["webpack://management/./src/components/form/RichTextEditor.tsx","webpack://management/./src/components/svgs/downArrow.tsx","webpack://management/./src/components/ui/confirmation.tsx","webpack://management/./src/components/ui/dashPageHeader.tsx","webpack://management/./src/hooks/detectOutsideClick.ts","webpack://management/./src/hooks/getQueryAdvance.ts","webpack://management/./src/components/svgs/smile.tsx","webpack://management/./src/components/svgs/attachment.tsx","webpack://management/./src/pages/resume-review/UploadScreen.tsx","webpack://management/./src/components/svgs/image.tsx","webpack://management/./src/components/svgs/files.tsx","webpack://management/./src/components/ui/CircularProgress.tsx","webpack://management/./src/components/svgs/play.tsx","webpack://management/./src/components/svgs/retry.tsx","webpack://management/./src/pages/resume-review/AttachementUpload.tsx","webpack://management/./src/pages/resume-review/MessageBox.tsx","webpack://management/./src/pages/resume-review/reviewSidebar.tsx","webpack://management/./src/components/ui/previewSkeleton.tsx","webpack://management/./src/helpers/loadFonts.ts","webpack://management/./src/helpers/templateMapper.ts","webpack://management/./src/styled/template_global.css?dbbf","webpack://management/./src/pages/resume-review/viewResume.tsx","webpack://management/./src/queries/resumeQueries.ts","webpack://management/./src/pages/resume-review/AttachmentDownload.tsx","webpack://management/./src/pages/resume-review/ReviewChat.tsx","webpack://management/./src/queries/chatQueries.ts","webpack://management/./src/styled/button.ts","webpack://management/./src/styled/template_global.css"],"sourcesContent":["import React, { forwardRef, Fragment } from 'react'\nimport { Controller, useFormContext } from 'react-hook-form'\nimport ReactQuill from 'react-quill'\nimport styled from 'styled-components'\n\ninterface IProps {\n  name: string\n  maxHeight?: string\n  placeholder?: string\n  modules?: any\n  formats?: Array<string>\n  disabled?: boolean\n  ref: any\n}\n\nconst RichTextEditor = forwardRef(\n  (\n    {\n      name,\n      maxHeight = '',\n      formats,\n      modules,\n      disabled = false,\n      placeholder,\n    }: IProps,\n    ref\n  ) => {\n    const { control } = useFormContext()\n    const initialModules = {\n      toolbar: [\n        ['bold', 'italic', 'underline'],\n        [{ list: 'ordered' }, { list: 'bullet' }],\n        ['link'],\n        ['clean'],\n      ],\n    }\n\n    const initialFormats = [\n      'bold',\n      'italic',\n      'underline',\n      'list',\n      'bullet',\n      'link',\n    ]\n\n    // useEffect(() => {\n    //   const linkInput = document && document.querySelector('.ql-tooltip input')\n    //   linkInput && linkInput.setAttribute('data-link', 'https://www.example.com')\n\n    //   return\n    // }, [])\n\n    return (\n      <Fragment>\n        <Wrapper maxHeight={maxHeight} disabled={disabled} className=\"wrapper\">\n          <Controller\n            name={name}\n            control={control}\n            render={({ field: { value, onChange, onBlur } }) => (\n              <ReactQuill\n                ref={ref as any}\n                modules={modules ? modules : initialModules}\n                onBlur={onBlur}\n                onChange={(content) => onChange(content)}\n                value={value}\n                formats={formats ? formats : initialFormats}\n                theme=\"snow\"\n                bounds={'wrapper'}\n                readOnly={disabled}\n                placeholder={placeholder}\n              />\n            )}\n          />\n        </Wrapper>\n      </Fragment>\n    )\n  }\n)\n\nexport default RichTextEditor\n\nconst Wrapper = styled.div<{ maxHeight: string; disabled: boolean }>`\n  .quill {\n    background-color: #f4f5f7;\n    border-radius: 6px;\n    display: block;\n  }\n  .ql-toolbar,\n  .ql-container {\n    border: none;\n    display: block;\n    ${({ maxHeight }) =>\n      maxHeight && `max-height: ${maxHeight}; overflow-y: scroll;`}\n  }\n  .ql-toolbar {\n    padding-top: 1rem;\n    span.ql-formats {\n      &:not(:last-child) {\n        border-right: 2px solid #ddd;\n      }\n      button {\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        padding: 0;\n        svg {\n          width: 1.2rem;\n          height: 1.2rem;\n        }\n      }\n    }\n    .ql-formats {\n      margin-right: 0.5rem;\n      padding-right: 0.5rem;\n    }\n    .ql-stroke {\n      stroke: #898989;\n    }\n  }\n\n  .ql-editor {\n    min-height: 150px;\n    * {\n      font-size: 1rem;\n    }\n    ${({ disabled, theme }) =>\n      disabled &&\n      ` background: ${theme.colors.grey};\n         user-select: none;\n          pointer-events: none;\n`}\n  }\n  .ql-editor.ql-blank::before {\n    font-style: unset;\n  }\n  .ql-editor ol,\n  .ql-editor ul {\n    padding-left: 0.5em;\n  }\n  .ql-tooltip {\n    z-index: 10;\n    border: none;\n    border-radius: 4px;\n    &[data-mode='link']:before {\n      content: 'Link';\n    }\n    &:before {\n      content: '';\n    }\n    input[type='text'] {\n      border: 1px solid #f4f5f7;\n      font-size: 1rem;\n      height: 40px;\n      width: 201px;\n    }\n\n    .ql-preview {\n      margin-right: 1rem;\n      text-decoration: underline;\n    }\n    &.ql-editing {\n      a.ql-action {\n        &:after {\n          position: relative;\n          top: 4px;\n          line-height: 1;\n          content: url('data:image/svg+xml;utf8,<svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"%2306c\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\" /></svg>');\n          filter: grayscale(1);\n          opacity: 0.5;\n        }\n        &:hover {\n          &:before {\n            filter: grayscale(0);\n            opacity: 1;\n          }\n        }\n      }\n    }\n    a.ql-remove {\n      &:before {\n        position: relative;\n        top: 3px;\n        margin-left: 0.5rem !important;\n        content: url('data:image/svg+xml;utf8,<svg width=\"16\" height=\"16\" viewBox=\"0 0 19 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"%2306c\" d=\"M6.08594 2.13281H5.90625C6.00508 2.13281 6.08594 2.05195 6.08594 1.95312V2.13281H12.9141V1.95312C12.9141 2.05195 12.9949 2.13281 13.0938 2.13281H12.9141V3.75H14.5312V1.95312C14.5312 1.16025 13.8866 0.515625 13.0938 0.515625H5.90625C5.11338 0.515625 4.46875 1.16025 4.46875 1.95312V3.75H6.08594V2.13281ZM17.4062 3.75H1.59375C1.19619 3.75 0.875 4.07119 0.875 4.46875V5.1875C0.875 5.28633 0.955859 5.36719 1.05469 5.36719H2.41133L2.96611 17.1143C3.00205 17.8802 3.63545 18.4844 4.40137 18.4844H14.5986C15.3668 18.4844 15.9979 17.8824 16.0339 17.1143L16.5887 5.36719H17.9453C18.0441 5.36719 18.125 5.28633 18.125 5.1875V4.46875C18.125 4.07119 17.8038 3.75 17.4062 3.75ZM14.4257 16.8672H4.57432L4.03076 5.36719H14.9692L14.4257 16.8672Z\"/></svg>') !important;\n        filter: grayscale(1);\n        opacity: 0.5;\n      }\n      &:hover {\n        &:before {\n          filter: grayscale(0);\n          opacity: 1;\n        }\n      }\n    }\n  }\n`\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst DownArrowIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        viewBox='0 0 14 8'\n        fill='none'\n        xmlns='http://www.w3.org/2000/svg'\n      >\n        <path d='M1 1L7 7L13 1' stroke={color || '#898989'} />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default DownArrowIcon\n","import React, { Fragment, ReactNode } from 'react'\nimport styled, { DefaultTheme, withTheme } from 'styled-components'\nimport WarningIcon from '../svgs/warning'\n\ninterface IProps {\n  theme: DefaultTheme\n  show: boolean\n  title: string\n  msg: string\n  children: ReactNode\n}\n\nconst ConfirmationBox: React.FC<IProps> = ({\n  theme,\n  show,\n  msg,\n  title,\n  children,\n}) => {\n  return (\n    <Fragment>\n      {show && (\n        <Wrapper data-test-id=\"confirmation-box\">\n          <Box>\n            <WarningIcon size=\"100px\" color={theme.colors.primary} />\n            <h2>{title}</h2>\n            <p>{msg}</p>\n            <ChildWrapper> {children}</ChildWrapper>\n          </Box>\n        </Wrapper>\n      )}\n    </Fragment>\n  )\n}\n\nexport default withTheme(ConfirmationBox)\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: 1000;\n  top: 0;\n  left: 0;\n  background-color: ${({ theme }) => theme.shades.dark[3]};\n`\n\nconst Box = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center !important;\n  align-items: center;\n  max-width: 500px;\n  max-height: 400px;\n  height: 100%;\n  width: 100%;\n  padding: 2rem;\n  border: 1px solid rgb(237 237 237 / 20%);\n  border-radius: 1rem;\n  background-color: #fff;\n\n  h2,\n  p {\n    text-align: center;\n    margin: 0 0 1rem;\n  }\n  p {\n    font-size: 1.2rem;\n    margin-bottom: 2rem;\n  }\n  svg {\n    margin-bottom: 2rem;\n  }\n`\n\nconst ChildWrapper = styled.div`\n  display: grid;\n  align-items: center;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 2rem;\n`\n","import React, { Fragment, ReactElement, ReactNode } from 'react'\nimport styled from 'styled-components'\n\ninterface ILayout {\n  name?: string\n  title: string | ReactElement<any, any>\n  children?: ReactNode\n  border?: boolean\n  style?: React.CSSProperties\n}\n\nconst DashPageHeader: React.FC<ILayout> = ({\n  name,\n  title,\n  children,\n  border = true,\n  style,\n}) => {\n  return (\n    <Fragment>\n      <Header style={style} border={border || false}>\n        <div>\n          {name && <p>{name}</p>}\n          {title && <h1>{title}</h1>}\n        </div>\n\n        <div>{children}</div>\n      </Header>\n    </Fragment>\n  )\n}\n\nexport default DashPageHeader\n\nconst Header = styled.header<{ border: boolean }>`\n  width: 100%;\n  max-height: 125px;\n  min-height: 125px;\n  height: 100%;\n  display: flex;\n  border-bottom: ${({ border }) => border && '1px solid #e2e9f3'};\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 1.5rem;\n  h1 {\n    margin-bottom: 0;\n    span {\n      font-weight: normal;\n    }\n  }\n  div:last-child {\n    display: flex;\n    button {\n      margin: 0 1rem;\n    }\n  }\n`\n","import React, { useEffect, useRef, useState } from 'react'\n\nconst detectOutsideClick = () => {\n  const [isOutside, setIsOutside] = useState(false)\n  const ref = useRef<any>(null)\n\n  const handleClickOutside = (e: any) => {\n    if (!ref || !ref.current) return\n    if (!ref.current.contains(e.target)) {\n      setIsOutside(true)\n    } else {\n      setIsOutside(false)\n    }\n  }\n\n  useEffect(() => {\n    if (!ref || !ref.current) return\n    document.addEventListener('mousedown', handleClickOutside, true)\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside, true)\n    }\n  }, [ref.current])\n\n  return { isOutside, ref }\n}\n\nexport default detectOutsideClick\n","import { useQuery } from 'react-query'\nimport { useAuth } from '../contexts/authProvider'\n\nconst getQueryAdvance = (\n  identifier: any,\n  fetcher: () => any,\n  enabled = true,\n  params?: any\n) => {\n  const { user, token } = useAuth()\n  const ref = user && user.ref\n\n  return useQuery(identifier, fetcher, {\n    enabled: !!token && !!ref && enabled,\n    ...params,\n  })\n}\n\nexport default getQueryAdvance\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst SmileIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        viewBox=\"0 0 512 512\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M256 352C293.2 352 319.2 334.5 334.4 318.1C343.3 308.4 358.5 307.7 368.3 316.7C378 325.7 378.6 340.9 369.6 350.6C347.7 374.5 309.7 400 256 400C202.3 400 164.3 374.5 142.4 350.6C133.4 340.9 133.1 325.7 143.7 316.7C153.5 307.7 168.7 308.4 177.6 318.1C192.8 334.5 218.8 352 256 352zM208.4 208C208.4 225.7 194 240 176.4 240C158.7 240 144.4 225.7 144.4 208C144.4 190.3 158.7 176 176.4 176C194 176 208.4 190.3 208.4 208zM304.4 208C304.4 190.3 318.7 176 336.4 176C354 176 368.4 190.3 368.4 208C368.4 225.7 354 240 336.4 240C318.7 240 304.4 225.7 304.4 208zM512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default SmileIcon\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst AttachmentIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        viewBox=\"0 0 512 512\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M396.2 83.8c-24.4-24.4-64-24.4-88.4 0l-184 184c-42.1 42.1-42.1 110.3 0 152.4s110.3 42.1 152.4 0l152-152c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-152 152c-64 64-167.6 64-231.6 0s-64-167.6 0-231.6l184-184c46.3-46.3 121.3-46.3 167.6 0s46.3 121.3 0 167.6l-176 176c-28.6 28.6-75 28.6-103.6 0s-28.6-75 0-103.6l144-144c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-144 144c-6.7 6.7-6.7 17.7 0 24.4s17.7 6.7 24.4 0l176-176c24.4-24.4 24.4-64 0-88.4z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default AttachmentIcon\n","import React, { Fragment, useCallback } from 'react'\n// import Resizer from 'react-image-file-resizer'\nimport { useDropzone } from 'react-dropzone'\nimport styled from 'styled-components'\nimport { Button } from '../../styled/button'\nimport CrossIcon from '../../components/svgs/cross'\nimport { useNotify } from '../../contexts/notify'\n\ninterface IProps {\n  setFiles: (val: any) => void\n  setShow: (val: boolean) => void\n  type: 'image' | 'attachment'\n}\n\nconst UploadScreen: React.FC<IProps> = ({ setFiles, setShow, type }) => {\n  const { setNotify } = useNotify()\n  const onDrop = useCallback(async (acceptedFiles) => {\n    try {\n      setFiles(acceptedFiles)\n      return setShow(false)\n    } catch (err) {\n      console.log(err)\n      return\n    }\n  }, [])\n\n  const onDropRejected = useCallback(async (rejectedFiles) => {\n    try {\n      if (!rejectedFiles || rejectedFiles.length === 0) return\n      return rejectedFiles.forEach((item: Record<string, any>) =>\n        setNotify({\n          type: 'warning',\n          message: item.file.name,\n          heading: item.errors[0].message,\n        })\n      )\n    } catch (err) {\n      console.log(err)\n      return\n    }\n  }, [])\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    accept:\n      type === 'image'\n        ? ['image/png', 'image/jpg', 'image/jpeg', 'image/webp']\n        : type === 'attachment'\n        ? [\n            'video/mp4',\n            'video/webm',\n            'application/msword',\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n            'application/pdf',\n            'text/plain',\n          ]\n        : '',\n    maxFiles: 10,\n    maxSize: 100 * 1024 * 1024,\n    onDrop,\n    onDropRejected,\n  })\n\n  return (\n    <Fragment>\n      <Wrapper>\n        <CloseBtn onClick={() => setShow(false)}>\n          <CrossIcon size=\"1.2rem\" />\n        </CloseBtn>\n\n        <DropWrapper {...getRootProps()}>\n          <input {...getInputProps()} />\n          {isDragActive ? (\n            <p>Drop the files here ...</p>\n          ) : (\n            <Fragment>\n              <p className=\"mb-2\">\n                Drag &apos;n&apos; drop here, or click to select image\n              </p>\n              <Button type=\"button\" btnType=\"primary\" size=\"lg\">\n                Choose File\n              </Button>\n            </Fragment>\n          )}\n        </DropWrapper>\n      </Wrapper>\n    </Fragment>\n  )\n}\n\nexport default UploadScreen\n\nconst Wrapper = styled.div`\n  max-height: 400px;\n  max-width: 850px;\n  height: 100%;\n  width: 100%;\n  padding: 5rem 4rem;\n  background-color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n`\n\nconst DropWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  margin: 0;\n  align-items: center;\n  justify-content: center;\n  background-image: url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='%23ACACACFF' stroke-width='2' stroke-dasharray='5%2c 8' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\");\n  opacity: 0.8;\n  transition: opacity 200ms;\n  cursor: pointer;\n  p {\n    font-size: 1.25rem;\n  }\n  &:hover {\n    opacity: 1;\n  }\n`\nconst CloseBtn = styled.span`\n  display: inline-flex;\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  padding: 1rem;\n  z-index: 1;\n  cursor: pointer;\n\n  &:hover {\n    svg {\n      path {\n        stroke: ${({ theme }) => theme.colors.primary};\n      }\n    }\n  }\n`\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst ImageIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        viewBox=\"0 0 512 512\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M152 120c-26.51 0-48 21.49-48 48s21.49 48 48 48s48-21.49 48-48S178.5 120 152 120zM447.1 32h-384C28.65 32-.0091 60.65-.0091 96v320c0 35.35 28.65 64 63.1 64h384c35.35 0 64-28.65 64-64V96C511.1 60.65 483.3 32 447.1 32zM463.1 409.3l-136.8-185.9C323.8 218.8 318.1 216 312 216c-6.113 0-11.82 2.768-15.21 7.379l-106.6 144.1l-37.09-46.1c-3.441-4.279-8.934-6.809-14.77-6.809c-5.842 0-11.33 2.529-14.78 6.809l-75.52 93.81c0-.0293 0 .0293 0 0L47.99 96c0-8.822 7.178-16 16-16h384c8.822 0 16 7.178 16 16V409.3z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default ImageIcon\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst FileIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 384 512\"\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        fill=\"none\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default FileIcon\n","import React, { Fragment } from 'react'\nimport styled, { keyframes } from 'styled-components'\n\ninterface ICircularProgress {\n  size?: number\n  progress?: number\n  trackWidth?: number\n  trackColor?: string\n  indicatorWidth?: number\n  indicatorColor?: string\n  indicatorCap?: 'inherit' | 'round' | 'butt' | 'square' | undefined\n  spinnerMode?: boolean\n  spinnerSpeed?: number\n}\nconst CircularProgress = (props: ICircularProgress) => {\n  const {\n    size = 30,\n    progress = 0,\n    trackWidth = 3,\n    trackColor = `#eee`,\n    indicatorWidth = 3,\n    indicatorColor = `rgba(240, 132, 56, 1)`,\n    indicatorCap = `round`,\n    spinnerMode = false,\n    spinnerSpeed = 1,\n  } = props\n\n  const center = size / 2,\n    radius =\n      center - (trackWidth > indicatorWidth ? trackWidth : indicatorWidth),\n    dashArray = 2 * Math.PI * radius,\n    dashOffset = dashArray * ((100 - progress) / 100)\n\n  return (\n    <Fragment>\n      <CircleIcon style={{ width: size, height: size }}>\n        <circle\n          className={`track ${spinnerMode ? 'spinner' : ''}`}\n          cx={center}\n          cy={center}\n          fill=\"transparent\"\n          r={radius}\n          stroke={trackColor}\n          strokeWidth={trackWidth}\n        />\n        <circle\n          className={`indicator ${spinnerMode ? 'indicator-spinner' : ''}`}\n          style={{ animationDuration: (spinnerSpeed * 1000).toString() }}\n          cx={center}\n          cy={center}\n          fill=\"transparent\"\n          r={radius}\n          stroke={indicatorColor}\n          strokeWidth={indicatorWidth}\n          strokeDasharray={dashArray}\n          strokeDashoffset={dashOffset}\n          strokeLinecap={indicatorCap}\n        />\n      </CircleIcon>\n    </Fragment>\n  )\n}\n\nexport default CircularProgress\n\nconst Spinner = keyframes`\n\n  0% {\n    transform: rotate(0)\n  }\n  100% {\n    transform: rotate(360deg)\n  }\n\n`\n\nconst CircleIcon = styled.svg`\n  transform: rotate(-90deg);\n  .indicator-spinner {\n    animation: ${Spinner} 1000ms linear infinite;\n    transform-origin: center;\n  }\n`\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst PlayIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 384 512\"\n        width={size || '1rem'}\n        className={className || ''}\n        height={size || '1rem'}\n        fill=\"none\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default PlayIcon\n","import React, { Fragment } from 'react'\ninterface IconProps {\n  size?: string\n  color?: string\n  className?: string\n}\nconst RetryIcon = ({ size, color, className }: IconProps) => {\n  return (\n    <Fragment>\n      <svg\n        width={size || '1rem'}\n        height={size || '1rem'}\n        className={className || ''}\n        viewBox=\"0 0 512 512\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fill={color || '#898989'}\n          d=\"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z\"\n        />\n        <path\n          fill={color || '#898989'}\n          d=\"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z\"\n        />\n      </svg>\n    </Fragment>\n  )\n}\n\nexport default RetryIcon\n","import axios from 'axios'\nimport React, { Fragment, useEffect, useRef, useState } from 'react'\nimport styled from 'styled-components'\nimport CrossIcon from '../../components/svgs/cross'\nimport FileIcon from '../../components/svgs/files'\nimport CircularProgress from '../../components/ui/CircularProgress'\nimport PlayIcon from '../../components/svgs/play'\nimport RetryIcon from '../../components/svgs/retry'\n\nconst AttachementUpload = ({\n  file,\n  onSuccess,\n  handeRemoveFile,\n  onDone,\n  index,\n}: {\n  file: File\n  index: number\n  onSuccess: (_file: Record<string, any>, index: number) => void\n  onDone: () => void\n  handeRemoveFile: (index: number, isUploaded: boolean) => void\n}) => {\n  const [progress, setProgress] = useState(0)\n  const [done, setDone] = useState(false)\n  const [error, setError] = useState(false)\n  const cancelToken = useRef<any>()\n\n  useEffect(() => {\n    cancelToken.current = axios.CancelToken.source()\n  }, [])\n\n  const uploadFile = async () => {\n    if (!file) return setError(true)\n    setError(false)\n\n    const formData = new FormData()\n    formData.append('chat-attachments', file)\n\n    await axios\n      .post('/management/chat/attachments', formData, {\n        cancelToken: cancelToken.current.token,\n        onUploadProgress: (progressEvent) => {\n          const percentage = Math.round(\n            (progressEvent.loaded * 100) / progressEvent.total\n          ) as any\n\n          setProgress(percentage)\n        },\n      })\n      .then((req) => req && req.data && onSuccess(req.data, index))\n      .catch((err) => {\n        if (axios.isCancel(err)) return\n        setError(true)\n      })\n      .finally(() => {\n        onDone()\n        setDone(true)\n      })\n  }\n\n  const removeFile = () => {\n    if (!done && cancelToken.current) {\n      cancelToken.current.cancel('Cancelling previous requests')\n    }\n    handeRemoveFile(index, done && !error)\n  }\n\n  useEffect(() => {\n    uploadFile()\n    return\n  }, [])\n\n  return (\n    <Fragment>\n      {error && <Alert>Failed to upload!</Alert>}\n      <StyledFile>\n        <span className=\"icon\">\n          {error ? (\n            <a onClick={() => uploadFile()}>\n              <RetryIcon size=\"1.2rem\" />\n            </a>\n          ) : progress !== 100 ? (\n            <CircularProgress progress={progress} />\n          ) : !done ? (\n            <CircularProgress progress={30} spinnerMode={true} />\n          ) : file.type &&\n            ['video', 'audio'].indexOf(file.type.split('/')[0]) !== -1 ? (\n            <PlayIcon size=\"1.2rem\" />\n          ) : (\n            <FileIcon size=\"1.2rem\" />\n          )}\n        </span>\n        <p className=\"truncate\">{file.name}</p>\n        <span className=\"remove\" onClick={() => removeFile()}>\n          <CrossIcon size=\"0.8rem\" />\n        </span>\n      </StyledFile>\n    </Fragment>\n  )\n}\n\nexport default AttachementUpload\n\nconst Alert = styled.p`\n  margin: 0 0.5rem;\n  font-size: 0.7rem;\n  color: red;\n  line-height: 1;\n`\nconst StyledFile = styled.div`\n  width: 300px;\n  height: 40px;\n  display: grid;\n  grid-template-columns: 40px auto 30px;\n  border: 1px solid rgba(52, 52, 52, 0.2);\n  border-radius: 6px;\n  margin: 0.5rem;\n  overflow: hidden;\n  align-items: center;\n  .icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 6px;\n    background-color: rgba(52, 52, 52, 0.2);\n    height: 100%;\n  }\n  .remove {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n  a {\n    height: fit-content;\n    line-height: 1;\n  }\n  p {\n    margin: 0 0.7rem;\n    font-size: 0.8rem;\n  }\n`\n","import React, { Fragment, useEffect, useRef, useState } from 'react'\nimport ReactDOMServer from 'react-dom/server'\nimport { FormProvider, useFieldArray, useForm } from 'react-hook-form'\nimport RichTextEditor from '../../components/form/RichTextEditor'\nimport { Quill } from 'react-quill'\nimport EmojiPicker, {\n  EmojiStyle,\n  EmojiClickData,\n  Emoji,\n} from 'emoji-picker-react'\nimport styled from 'styled-components'\nimport detectOutsideClick from '../../hooks/detectOutsideClick'\nimport SmileIcon from '../../components/svgs/smile'\nimport AttachmentIcon from '../../components/svgs/attachment'\nimport UploadScreen from './UploadScreen'\nimport ImageIcon from '../../components/svgs/image'\nimport { Button } from '../../styled/button'\nimport { useMutation, useQueryClient } from 'react-query'\nimport axios from 'axios'\nimport { useNotify } from '../../contexts/notify'\nimport { LoadingDots, Spinner } from '../../styled/loader'\nimport AttachementUpload from './AttachementUpload'\n\ninterface IMessage {\n  message: string\n  attachments: Array<{\n    _id: string\n    name: string\n    path: string\n    type: string\n  }>\n}\ninterface IMessageBox {\n  ticket: string\n  resumeId: string\n  className?: string\n  style: React.CSSProperties\n  isFetchingMessage: boolean\n}\n\nconst Embed = Quill.import('blots/embed')\n\nconst emojiHTML = (value: string) =>\n  ReactDOMServer.renderToString(<Emoji unified={value} size={20} />)\n\nclass EmojiBolt extends Embed {\n  static create(value: string) {\n    const node = super.create()\n    node.title = value\n    node.classList.add('composer-emoji')\n    node.innerHTML = emojiHTML(value)\n    return node\n  }\n}\nEmojiBolt.blotName = 'emojiEmbed'\nEmojiBolt.tagName = 'span'\n\nQuill.register(EmojiBolt)\n\nconst formats = ['bold', 'italic', 'link', 'emojiEmbed']\n\nconst MessageBox = ({\n  ticket,\n  resumeId,\n  className,\n  style,\n  isFetchingMessage,\n}: IMessageBox) => {\n  const { setNotify } = useNotify()\n  const defaultValues = {\n    message: '',\n    attachments: [],\n  }\n  const { isOutside, ref } = detectOutsideClick()\n  const quillRef = useRef<any>()\n  const [show, setShow] = useState<'emoji' | 'attachment' | 'image' | null>(\n    null\n  )\n  const [showDropzone, setShowDropzone] = useState(false)\n  const [files, setFiles] = useState<Array<any>>([])\n  const [filesInProgress, setFilesInProgress] = useState(0)\n  const [filesToRemove, setFilesToRemove] = useState<Array<string>>([])\n\n  const queryClient = useQueryClient()\n\n  const methods = useForm<IMessage>({\n    mode: 'onBlur',\n    defaultValues,\n  })\n\n  const {\n    handleSubmit,\n    watch,\n    reset,\n    control,\n    formState: { isSubmitting },\n  } = methods\n\n  const { append, remove } = useFieldArray({\n    control,\n    name: 'attachments',\n  })\n\n  const message = watch('message')\n  const attachments = watch('attachments')\n\n  const regex = /(<([^>]+)>)/gi\n  const hasMessage = !!message.replace(regex, '').length\n\n  const handleCache = (data: Record<string, any>) => {\n    let chats = queryClient.getQueryData(['chats', data.ticketId]) as any\n    if (!chats) {\n      chats = {\n        pages: [{ total: 1, limit: 15, page: 0, items: [data] }],\n        pageParams: [undefined],\n      }\n    } else {\n      chats.pages[0].items.unshift(data)\n    }\n    queryClient.setQueryData(['chats', data.ticketId], chats)\n\n    return\n  }\n\n  const sendMessage = useMutation(\n    (reqData) => axios.post('/management/chat', reqData),\n    {\n      onSuccess: ({ data }) => {\n        handleCache(data)\n\n        setFiles([])\n        return reset()\n      },\n      onError: (err: any) => {\n        if (\n          err &&\n          err.response &&\n          err.response.data &&\n          err.response.data.error &&\n          err.response.data.error.status === 400 &&\n          err.response.data.error.message === 'Ticket has been closed!'\n        ) {\n          queryClient.setQueryData(\n            ['reviewTicket', ticket],\n            (queryData: any) => {\n              return { ...queryData, status: 'closed' }\n            }\n          )\n        }\n        setNotify({\n          type: 'danger',\n          heading: 'Err!',\n          message: 'Failed to send message',\n        })\n      },\n      // onSettled: () => {},\n    }\n  )\n\n  const onSubmit = async (data: any) => {\n    if (data.message && hasMessage) {\n      const dummy = document.createElement('div')\n      dummy.innerHTML = data.message\n      const emojis = dummy.querySelectorAll('span.composer-emoji') as any\n      if (emojis && emojis.length > 0) {\n        emojis.forEach((item: HTMLElement) => {\n          item.innerText = item.title\n        })\n      }\n      const regex = new RegExp('<p><br></p>', 'g')\n      data.message = dummy.innerHTML.replace(regex, '')\n    } else {\n      data.message = ''\n    }\n    return sendMessage.mutate({\n      ...data,\n      ticketId: ticket,\n      resumeId,\n    })\n  }\n\n  const insertEmoji = async (emojiData: EmojiClickData, _event: MouseEvent) => {\n    setShow(null)\n    if (!quillRef) return\n    const editor = quillRef.current.editor\n    if (!editor) return\n    const selection = await editor.getSelection()\n    if (!selection)\n      return await editor.insertEmbed(0, 'emojiEmbed', emojiData.unified)\n    const cursorPosition = selection.index\n    await editor.insertEmbed(cursorPosition, 'emojiEmbed', emojiData.unified)\n    await editor.setSelection(cursorPosition + 1)\n  }\n\n  const apiDeleteFiles = async (ids: string[]) => {\n    if (ids.length === 0) return\n    const options = {\n      method: 'DELETE',\n      url: `/management/chat/attachments`,\n      data: { ids },\n    }\n    await axios.request(options as any).catch((_err) => {\n      setNotify({\n        type: 'danger',\n        heading: 'Err!',\n        message: 'Failed to delete file(s)',\n      })\n    })\n  }\n\n  useEffect(() => {\n    if (!isOutside) return\n    setShow(null)\n  }, [isOutside])\n\n  useEffect(() => {\n    if (filesToRemove.length === 0) return\n    const timer = setTimeout(() => {\n      apiDeleteFiles(filesToRemove)\n      setFilesToRemove([])\n    }, 2000)\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [filesToRemove])\n\n  const handleFileDrop = (droppedFiles: File[]) => {\n    setFilesInProgress((prev) => prev + droppedFiles.length)\n    setFiles((prev) => [...prev, ...droppedFiles])\n  }\n\n  const handleFileSuccess = (file: Record<string, any>, _fileIndex: number) => {\n    append(file)\n  }\n\n  const handleRemoveFile = (fileIndex: number, isUploaded: boolean) => {\n    const index = attachments.findIndex(\n      (item) => item.name === files[fileIndex].name\n    )\n    if (isUploaded && index !== -1) {\n      setFilesToRemove((prev) => [...prev, attachments[index]._id])\n      remove(index)\n    }\n    const newFiles = [...files]\n    newFiles.splice(fileIndex, 1)\n    setFiles(newFiles)\n  }\n\n  const handleFileDone = () => {\n    setFilesInProgress((prev) => {\n      if (prev === 0) return 0\n      return prev - 1\n    })\n  }\n  const handleDropzone = (type: 'attachment' | 'image') => {\n    setShow(type)\n    setShowDropzone(true)\n  }\n  return (\n    <Fragment>\n      <FormProvider {...methods}>\n        <Wrapper\n          id=\"message-box\"\n          className={className}\n          hasFiles={files && files.length > 0}\n          style={style}\n        >\n          <div id=\"toolbar\">\n            <div\n              className={`${show === 'emoji' ? 'preview-emoji' : ''} emoji`}\n              ref={ref}\n            >\n              <button\n                className=\"insertEmoji toolbar-btn\"\n                onClick={() => setShow(show === 'emoji' ? null : 'emoji')}\n              >\n                <SmileIcon size=\"18px\" color=\"rgba(52, 52, 52, 0.4)\" />\n              </button>\n              <div className=\"emojipicker\">\n                <EmojiPicker\n                  onEmojiClick={insertEmoji}\n                  autoFocusSearch={false}\n                  lazyLoadEmojis={true}\n                  previewConfig={{\n                    showPreview: false,\n                  }}\n                  emojiStyle={EmojiStyle.GOOGLE}\n                  emojiVersion=\"0.6\"\n                  skinTonesDisabled\n                />\n              </div>\n            </div>\n            <button\n              className=\"insertImage toolbar-btn\"\n              onClick={() => handleDropzone('image')}\n            >\n              <ImageIcon size=\"18px\" color=\"rgba(52, 52, 52, 0.4)\" />\n            </button>\n            <button\n              className=\"insertDocument toolbar-btn\"\n              onClick={() => handleDropzone('attachment')}\n            >\n              <AttachmentIcon size=\"18px\" color=\"rgba(52, 52, 52, 0.4)\" />\n            </button>\n            <button className=\"ql-bold toolbar-btn\" />\n            <button className=\"ql-italic toolbar-btn\" />\n            <div className=\"fetch-indicator\">\n              {isFetchingMessage && (\n                <Fragment>\n                  <Spinner size=\"1rem\" type=\"primary\" />\n                  <LoadingDots color=\"rgba(240, 132, 56, 1)\">\n                    Checking\n                  </LoadingDots>\n                </Fragment>\n              )}\n            </div>\n          </div>\n\n          {showDropzone && (\n            <DropWrapper>\n              <UploadScreen\n                setShow={setShowDropzone}\n                setFiles={handleFileDrop}\n                type={show === 'image' ? 'image' : 'attachment'}\n              />\n            </DropWrapper>\n          )}\n\n          <div className=\"message-box\">\n            <RichTextEditor\n              ref={quillRef}\n              placeholder={'Type text here...'}\n              name=\"message\"\n              formats={formats}\n              modules={{\n                toolbar: {\n                  container: '#toolbar',\n                },\n                clipboard: {\n                  matchVisual: false,\n                },\n              }}\n            />\n\n            {files.map((file, i) => (\n              <AttachementUpload\n                key={i}\n                file={file}\n                index={i}\n                onSuccess={handleFileSuccess}\n                onDone={handleFileDone}\n                handeRemoveFile={handleRemoveFile}\n              />\n            ))}\n            <Button\n              className=\"send-btn\"\n              disabled={\n                isSubmitting ||\n                filesInProgress > 0 ||\n                (!hasMessage && attachments.length === 0)\n              }\n              onClick={handleSubmit(onSubmit)}\n            >\n              {isSubmitting ? <Spinner size=\"1rem\" type=\"primary\" /> : 'Send'}\n            </Button>\n          </div>\n        </Wrapper>\n      </FormProvider>\n    </Fragment>\n  )\n}\n\nexport default MessageBox\n\nconst Wrapper = styled.div<{ hasFiles: boolean }>`\n  margin: 1rem;\n  border: 1px solid rgba(226, 233, 243, 1);\n  border-radius: 6px;\n  position: relative;\n\n  .message-box {\n    min-height: ${({ hasFiles }) => (hasFiles ? '0px' : '100px')};\n    overflow-y: auto;\n    max-height: 100px;\n    .send-btn {\n      position: absolute;\n      bottom: 10px;\n      right: 20px;\n      width: fit-content;\n      padding: 0 1.5rem;\n      min-width: 75px;\n    }\n  }\n  .fetch-indicator {\n    width: auto;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    margin-right: 1rem;\n    p {\n      margin-left: 0.7rem;\n    }\n  }\n  .emoji {\n    display: block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n\n    &.preview-emoji {\n      .emojipicker {\n        display: block;\n      }\n    }\n    .emojipicker {\n      display: none;\n      position: absolute;\n      bottom: 20px;\n      left: -10px;\n      z-index: 1000;\n    }\n  }\n  #toolbar {\n    border: none;\n    border-bottom: 1px solid rgba(226, 233, 243, 1);\n    .toolbar-btn {\n      padding: 3px 10px;\n      width: fit-content;\n    }\n  }\n\n  .quill {\n    background: transparent;\n  }\n  .ql-container {\n    overflow-y: unset;\n    .ql-disabled {\n    }\n  }\n  .ql-editor {\n    .composer-emoji span {\n      position: relative;\n      top: 5px;\n    }\n    /* font-size: 0.8rem; */\n    min-height: ${({ hasFiles }) => (hasFiles ? '0px' : '100px')};\n    p,\n    b,\n    em,\n    i,\n    span {\n      font-size: 0.875rem;\n    }\n  }\n`\n\nconst DropWrapper = styled.div`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n  background-color: #0000002e;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n","import dayjs from 'dayjs'\nimport React, { Fragment, useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport styled from 'styled-components'\nimport DownArrowIcon from '../../components/svgs/downArrow'\nimport WarningIcon from '../../components/svgs/warning'\nimport logoIcon from '../../public/logo/resume-mango-logo.png'\nimport { SK_Heading, SK_Text, SK_Wrapper } from '../../styled/loader'\n\nconst ReviewAccordian = ({\n  data,\n  handleShowResume,\n}: {\n  data: Record<string, any>\n  handleShowResume: (_show: boolean) => void\n}) => {\n  const [show, setShow] = useState({\n    ticket: true,\n    customer: true,\n    resume: true,\n  })\n  const navigate = useNavigate()\n  return (\n    <AccordianWrapper>\n      <div>\n        <Accordian show={show.ticket}>\n          <div\n            className=\"head-wrapper\"\n            onClick={() => setShow({ ...show, ticket: !show.ticket })}\n          >\n            <p className=\"acc_heading\">Ticket Info</p>\n            <span>\n              <DownArrowIcon size=\".8rem\" />\n            </span>\n          </div>\n          <div className=\"item-wrapper\">\n            <div className=\"item\">\n              <p className=\"item-label\">Ticket ID</p>\n              <p>{data._id || '-'}</p>\n            </div>\n            <div className=\"item\">\n              <p className=\"item-label\">Status</p>\n              <p className=\"capitalize\">{data.status || '-'}</p>\n            </div>\n          </div>\n        </Accordian>\n        <Accordian show={show.customer}>\n          <div\n            className=\"head-wrapper\"\n            onClick={() => setShow({ ...show, customer: !show.customer })}\n          >\n            <p className=\"acc_heading\">Customer Info</p>\n            <span>\n              <DownArrowIcon size=\".8rem\" />\n            </span>\n          </div>\n          <div className=\"item-wrapper\">\n            <div className=\"item\">\n              <p className=\"item-label\">Customer </p>\n              <p>\n                {(data.user &&\n                  data.user.firstName &&\n                  (data.user.firstName + ' ' + data.user.lastName || '')) ||\n                  '-'}\n              </p>\n            </div>\n          </div>\n        </Accordian>\n      </div>\n      <div>\n        <Accordian show={show.resume}>\n          <div\n            className=\"head-wrapper\"\n            onClick={() => setShow({ ...show, resume: !show.resume })}\n          >\n            <p className=\"acc_heading\">Resume Info</p>\n            <span>\n              <DownArrowIcon size=\".8rem\" />\n            </span>\n          </div>\n          <div className=\"item-wrapper\">\n            <div className=\"item\">\n              <p className=\"item-label\">Name</p>\n              <p>{(data.resume && data.resume.title) || '-'}</p>\n            </div>\n            <div className=\"item\">\n              <p className=\"item-label\">Date Created</p>\n              <p>\n                {(data.createdAt &&\n                  dayjs(data.createdAt).format('DD/MM/YYYY')) ||\n                  '-'}\n              </p>\n            </div>\n            <div className=\"item\">\n              <p className=\"item-label\">Resume Link</p>\n              {(data && data.resume && (\n                <a onClick={() => handleShowResume(true)}>View Resume</a>\n              )) ||\n                '-'}\n            </div>\n          </div>\n        </Accordian>\n      </div>\n    </AccordianWrapper>\n  )\n}\n\nconst ReviewSidebar = ({\n  data,\n  isLoading,\n  isError,\n  handleShowResume,\n}: {\n  data: Record<string, any>\n  isLoading: boolean\n  isError: boolean\n  handleShowResume: (_show: boolean) => void\n}) => {\n  return (\n    <Fragment>\n      <NavWrapper className=\"hide-scrollbar\">\n        <NavBrand>\n          <LogoWrapper>\n            <a href={`${process.env.BASE_HOST}`}>\n              <img\n                src={logoIcon}\n                width=\"75px\"\n                style={{ marginRight: '0.3rem' }}\n              />\n            </a>\n            <p>Management Console</p>\n          </LogoWrapper>\n        </NavBrand>\n        <NavLinksWrapper>\n          {isError ? (\n            <div className=\"align-center\">\n              <WarningIcon size=\"2rem\" />\n              <p style={{ marginLeft: '0.5rem' }}>\n                Failed to load ticket details!\n              </p>\n            </div>\n          ) : isLoading ? (\n            <div style={{ padding: '2.5rem', height: '100%' }}>\n              <AccordianWrapper>\n                <SK_Wrapper>\n                  <SK_Heading className=\"mb-1\" />\n                  <SK_Text className=\"mb\" />\n                  <SK_Text className=\"mb\" />\n                  <SK_Text className=\"mb\" />\n                  <SK_Text style={{ marginBottom: '1rem' }} />\n                  <SK_Heading className=\"mb-1\" />\n                  <SK_Text style={{ marginBottom: '5rem' }} />\n                </SK_Wrapper>\n                <SK_Wrapper>\n                  <SK_Heading className=\"mb-1\" />\n                  <SK_Text className=\"mb\" />\n                  <SK_Text className=\"mb\" />\n                </SK_Wrapper>\n              </AccordianWrapper>\n            </div>\n          ) : (\n            <ReviewAccordian data={data} handleShowResume={handleShowResume} />\n          )}\n        </NavLinksWrapper>\n      </NavWrapper>\n    </Fragment>\n  )\n}\n\nexport default ReviewSidebar\nconst AccordianWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  width: 100%;\n`\nconst Accordian = styled.div<{ show: boolean }>`\n  .item-wrapper,\n  .head-wrapper {\n    padding: 0 2.5rem;\n  }\n  .head-wrapper {\n    background: rgba(240, 132, 56, 0.05);\n    height: 40px;\n    color: ${({ theme }) => theme.colors.primary};\n    margin: auto;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    border-right: 3px solid ${({ theme }) => theme.colors.primary};\n    margin-bottom: 1rem;\n    cursor: pointer;\n    svg {\n      transition: all ease-in-out 0.5s;\n      transform: ${({ show }) =>\n        show ? 'rotateZ(360deg)' : 'rotateZ(180deg)'};\n      path {\n        stroke: ${({ theme }) => theme.colors.primary};\n        stroke-width: 2;\n      }\n    }\n    p {\n      font-size: 0.875rem;\n      margin: 0;\n      padding: 0;\n    }\n  }\n  .item-wrapper {\n    transition: all ease-in-out 0.5s;\n    height: 100%;\n    max-height: ${({ show }) => (show ? '1000px' : '0px')};\n    opacity: ${({ show }) => (show ? 1 : 0)};\n    visibility: ${({ show }) => (show ? 'visible' : 'hidden')};\n\n    overflow: hidden;\n    p {\n      margin: 0.3rem 0;\n    }\n    a {\n      color: ${({ theme }) => theme.colors.primary};\n      text-decoration: underline;\n    }\n    .item {\n      margin-bottom: 1rem;\n    }\n    .item-label {\n      font-size: 0.75rem;\n      color: rgba(52, 52, 52, 0.5);\n    }\n  }\n`\n\nconst NavWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  transition: transform ease-in-out 500ms;\n  max-width: 260px;\n  overflow: auto;\n  position: fixed;\n  z-index: 2;\n`\n\nconst LogoWrapper = styled.div`\n  text-align: center;\n  a {\n    display: flex;\n    align-items: flex-start;\n    justify-content: center;\n    width: 100%;\n  }\n`\nconst NavBrand = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-height: 125px;\n  min-height: 125px;\n  height: 100%;\n  width: 100%;\n  max-width: 260px;\n  background: #0f102a;\n\n  p {\n    color: #bababa;\n    margin-top: 0;\n    font-size: 1rem;\n    font-weight: bold;\n  }\n`\nconst NavLinksWrapper = styled.nav`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: auto;\n  width: 100%;\n  flex: 1;\n  background: #f7f8fa;\n  padding: 2.5rem 0;\n`\n","import React, { Fragment } from 'react'\nimport styled from 'styled-components'\nimport {\n  SK_Circle,\n  SK_Form_Label,\n  SK_Heading,\n  SK_Text,\n  SK_Thumbnail,\n  SK_Wrapper\n} from '../../styled/loader'\n\nconst PreviewSkeleton = ({\n  style,\n  scale\n}: {\n  style?: React.CSSProperties | undefined\n  scale: number\n}) => {\n  const styles = {\n    ...(style && style),\n    ...(scale ? { transform: `scale(${scale})` } : { transform: 'scale(0.6)' })\n  }\n  return (\n    <Fragment>\n      <PreviewLoader className='template_skeleton' style={styles}>\n        <SK_Wrapper>\n          <Grid columns='30% 60%'>\n            <PreviewAvatar>\n              <SK_Circle />\n            </PreviewAvatar>\n\n            <div>\n              <SK_Heading />\n              <SK_Text />\n            </div>\n          </Grid>\n          <Grid\n            columns='40% 55%'\n            style={{\n              borderTop: ' 1px solid #ddd',\n              height: '100%'\n            }}\n          >\n            <div\n              style={{\n                borderRight: ' 1px solid #ddd',\n                height: '100%',\n                padding: '3rem 2rem 3rem 0'\n              }}\n            >\n              <Blocks>\n                <SK_Heading />\n                <SK_Text width='75%' />\n              </Blocks>\n              <Blocks>\n                <SK_Heading />\n                <SK_Text width='75%' />\n                <SK_Text width='65%' />\n              </Blocks>\n              <Blocks>\n                <SK_Heading />\n                <SK_Text width='95%' />\n                <SK_Text width='55%' />\n              </Blocks>\n            </div>\n            <div\n              style={{\n                height: '100%',\n                padding: '3rem 2rem 3rem 0'\n              }}\n            >\n              <Blocks>\n                <SK_Heading />\n                <SK_Text width='90%' />\n                <SK_Text width='95%' />\n                <SK_Text width='75%' />\n\n                <br />\n                <SK_Text width='95%' />\n                <SK_Text width='80%' />\n                <SK_Text width='55%' />\n              </Blocks>\n              <br />\n              <Blocks>\n                <SK_Heading />\n                <SK_Text width='90%' />\n                <SK_Text width='95%' />\n                <SK_Text width='75%' />\n              </Blocks>\n              <br />\n              <Blocks>\n                <SK_Heading />\n                <SK_Text width='90%' />\n                <SK_Text width='95%' />\n              </Blocks>\n            </div>\n          </Grid>\n        </SK_Wrapper>\n      </PreviewLoader>\n    </Fragment>\n  )\n}\n\nexport default PreviewSkeleton\n\nconst Grid = styled.div<{ columns?: string }>`\n  display: grid;\n  grid-template-columns: ${({ columns }) =>\n    columns ? columns : 'repeat(2, 1fr)'};\n  grid-gap: 2rem;\n  margin-top: 1.5rem;\n  align-items: center;\n  ${SK_Thumbnail} {\n    width: 100px;\n    height: 100px;\n  }\n  ${SK_Heading} {\n    margin-bottom: 1.7rem;\n  }\n  ${SK_Text} {\n    margin-bottom: 0.8rem;\n  }\n  ${SK_Form_Label} {\n    margin-bottom: 0.5rem;\n  }\n`\n\nconst PreviewLoader = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 297mm;\n  width: 210mm;\n  background-color: #fff;\n  padding: 2rem;\n  ${SK_Circle} {\n    width: 100px;\n    height: 100px;\n  }\n`\nconst PreviewAvatar = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst Blocks = styled.div`\n  margin-bottom: 4rem;\n`\n","/**\n * Loads Fonts\n * @param fonts templateData.fonts from getResumeTemplate()\n */\nexport const loadFonts = async (fonts: Array<Record<string, any>>) => {\n  if ('fonts' in document) {\n    Promise.all(\n      fonts.map((font: any) => {\n        const face = new FontFace(\n          font.name,\n          `url(${font.url}) format('${font.format}')`\n        )\n        face.style = font.style\n        face.weight = font.weight\n        return face.load()\n      })\n    ).then(function (loadedFonts) {\n      loadedFonts &&\n        loadedFonts.forEach(function (font) {\n          document.fonts.add(font)\n        })\n    })\n    return true\n  } else return false\n}\n","const templateMapper = (\n  initialJson: any,\n  initialData: any,\n  templateWrapper: HTMLElement,\n  buffer: number\n) => {\n  if (\n    !initialJson ||\n    !initialJson.layout ||\n    !initialJson.secondaryLayout ||\n    !initialData\n  )\n    return\n\n  const json2html = (json: any) => {\n    const node = (item: any) => {\n      const e = document.createElement(item.tag)\n      if (item.class) e.className = item.class\n      if (item.name && item.name !== 'element') e.classList.add(item.name)\n      if (item.id) e.classList.add(item.id)\n      if (item.text) {\n        if (e.classList.contains('space_before')) {\n          e.textContent = '\\u0020' + item.text\n        } else {\n          e.textContent = item.text\n        }\n      }\n      if (item.html) e.innerHTML = item.html\n      if (item.src) e.src = item.src\n      if (item.blocks && item.blocks.length > 0) {\n        e.classList.add('template_column', 'not-filled')\n        e.setAttribute('data-blocks', item.blocks.join(' '))\n      }\n\n      if (item.children && item.children.length > 0) {\n        for (const child of item.children) e.appendChild(node(child))\n      }\n      return e\n    }\n\n    return node(json)\n  }\n\n  const deepKeys: any = (t: any, pre = []) =>\n    Array.isArray(t)\n      ? []\n      : Object(t) === t\n      ? Object.entries(t).flatMap(([k, v]) => deepKeys(v, [...pre, k]))\n      : pre.join('.')\n\n  const getKeyVal = (selectionArray: Array<any>, obj: any) => {\n    selectionArray.forEach((key) => {\n      obj = obj[key]\n    })\n    return obj\n  }\n\n  const chunkArray = (arr: Array<any>, n: number) => {\n    const chunkLength = Math.max(arr.length / n, 1)\n    const chunks = []\n    for (let i = 0; i < chunkLength; i++) {\n      chunks.push(arr.slice(n * i, n * (i + 1)))\n    }\n    return chunks\n  }\n\n  const mapKeys = (block: any, keys: any, data: any) => {\n    const i = keys.indexOf(block.name)\n    if (i >= 0) {\n      const key = keys[i].split('.')\n      const val = getKeyVal(key, data)\n\n      if (key.length === 1 && key[0] === 'description') {\n        block.html = val\n      } else {\n        block.text = val\n      }\n    }\n    if (block.parent) {\n      const kIndex = keys.indexOf(block.parent)\n      if (kIndex >= 0) {\n        const key = block.parent.split('.')\n        const val = getKeyVal(key, data)\n        if (!val) {\n          if (block.text) block.text = ''\n          if (block.html) block.html = ''\n        }\n      } else {\n        if (block.text) block.text = ''\n        if (block.html) block.html = ''\n      }\n    }\n\n    if (block.children.length > 0) {\n      for (const child of block.children) mapKeys(child, keys, data)\n    }\n    return block\n  }\n\n  const mapLayoutWrapper = (title: string, layout: any) => {\n    let columns = 0\n    const mapper = (title: string, layout: any) => {\n      if (layout.name === 'title') {\n        layout.text = title\n      }\n      if (layout.name === 'blocks-wrapper' && layout.columns) {\n        columns = parseInt(layout.columns)\n      }\n      for (const child of layout.children) mapper(title, child)\n    }\n    mapper(title, layout)\n\n    return { layout, columns }\n  }\n\n  const pages: any = {}\n\n  const current: any = {\n    page: null,\n    pageNo: 1,\n    wrapper: null,\n    column: null,\n    blocksWrapper: null,\n    block: null\n  }\n  const secondaryLayout = json2html(initialJson.secondaryLayout)\n\n  const mapDesc = (\n    title: string,\n    block: any,\n    parent: any,\n    initialPageOffset: number,\n    blockIndex: number,\n    hasColumns: boolean,\n    clonedBlockLayout: any,\n    pageLayout: any\n  ) => {\n    const blockRect = block.getBoundingClientRect()\n    const blockOffset = blockRect.y + window.scrollY + blockRect.height + buffer\n    if (blockOffset > initialPageOffset) {\n      const childBlocks = Array.from(block.children)\n      block.innerHTML = ''\n      let wrapper = parent.querySelector('.description')\n\n      if (childBlocks.length === 0) return\n\n      childBlocks.forEach((el: any, i: number) => {\n        if (wrapper) wrapper.appendChild(el)\n\n        const elRect = el.getBoundingClientRect()\n        const elOffset = elRect.y + window.scrollY + elRect.height + buffer\n        const pageRect = current.page.getBoundingClientRect()\n        const pageOffset = pageRect.y + window.scrollY + pageRect.height\n\n        if (elOffset > pageOffset) {\n          let newBlock\n\n          if (i > 0) {\n            const mapped = mapKeys(clonedBlockLayout, [], {})\n            newBlock = json2html(mapped)\n            const newDescBlock = newBlock.querySelector('.description')\n\n            if (newDescBlock) {\n              newDescBlock.appendChild(el)\n              wrapper = newDescBlock\n            }\n          } else {\n            newBlock = parent\n          }\n          let page: any\n          if (current.pageNo >= Object.keys(pages).length) {\n            page = secondaryLayout.cloneNode(true)\n            pages[current.pageNo + 1] = {\n              page,\n              cols: [...page.querySelectorAll('.template_column')]\n            }\n            templateWrapper.appendChild(page)\n          } else {\n            page = pages[current.pageNo + 1].page\n          }\n\n          current.pageNo = current.pageNo + 1\n\n          const subMapperLayout = mapLayoutWrapper(title, pageLayout)\n          if (blockIndex < 1 && i < 1) current.wrapper.remove()\n\n          current.wrapper = json2html(subMapperLayout.layout)\n\n          const secCol = [...page.querySelectorAll('.template_column')]\n\n          const found = secCol.filter(\n            (col) =>\n              col.getAttribute('data-blocks') ===\n              current.column.getAttribute('data-blocks')\n          )[0]\n\n          current.page = page\n          current.column = found\n          current.blocksWrapper =\n            current.wrapper.getElementsByClassName('blocks-wrapper')[0]\n\n          if (hasColumns) {\n            current.blocksWrapper.removeAttribute('class')\n          }\n\n          current.blocksWrapper.appendChild(newBlock)\n          current.column.appendChild(current.wrapper)\n          current.column.classList.remove('not-filled')\n          if (blockIndex >= 1 || i >= 1) {\n            const heading = current.wrapper.getElementsByClassName('title')[0]\n            heading.parentElement.removeChild(heading)\n          }\n        }\n      })\n    }\n    return\n  }\n\n  const overflown = (\n    title: string,\n    layout: any,\n    block: any,\n    blockIndex: number,\n    hasColumns: boolean,\n    clonedBlockLayout: any\n  ) => {\n    const pageRect = current.page.getBoundingClientRect()\n    const pageOffset = pageRect.y + window.scrollY + pageRect.height\n\n    const blockRect = block.getBoundingClientRect()\n    const blockOffset = blockRect.y + window.scrollY + blockRect.height + buffer\n    if (blockOffset > pageOffset) {\n      let page: any\n      // ////////////////// //New\n      const descEl = block.querySelector('.description')\n      if (descEl) {\n        mapDesc(\n          title,\n          descEl,\n          block,\n          pageOffset,\n          blockIndex,\n          hasColumns,\n          clonedBlockLayout,\n          layout\n        )\n      } else {\n        if (current.pageNo >= Object.keys(pages).length) {\n          page = secondaryLayout.cloneNode(true)\n          pages[current.pageNo + 1] = {\n            page,\n            cols: [...page.querySelectorAll('.template_column')]\n          }\n          templateWrapper.appendChild(page)\n        } else {\n          page = pages[current.pageNo + 1].page\n        }\n\n        current.pageNo = current.pageNo + 1\n\n        const subMapperLayout = mapLayoutWrapper(title, layout)\n        if (blockIndex < 1) current.wrapper.remove()\n\n        current.wrapper = json2html(subMapperLayout.layout)\n\n        const secCol = [...page.querySelectorAll('.template_column')]\n\n        const found = secCol.filter(\n          (col) =>\n            col.getAttribute('data-blocks') ===\n            current.column.getAttribute('data-blocks')\n        )[0]\n        current.page = page\n        current.column = found\n        current.blocksWrapper =\n          current.wrapper.getElementsByClassName('blocks-wrapper')[0]\n\n        if (hasColumns) {\n          current.blocksWrapper.removeAttribute('class')\n        }\n        current.blocksWrapper.appendChild(block)\n        current.column.appendChild(current.wrapper)\n        current.column.classList.remove('not-filled')\n\n        if (blockIndex >= 1) {\n          const heading = current.wrapper.getElementsByClassName('title')[0]\n          heading.parentElement.removeChild(heading)\n        }\n      }\n    }\n  }\n\n  const mapBlockLayout = (\n    title: string,\n    layout: any,\n    blocks: any,\n    clonedBlockLayout: any\n  ) => {\n    if (blocks.length < 1) return\n\n    const mappedWrapper = mapLayoutWrapper(title, layout)\n    current.wrapper = json2html(mappedWrapper.layout)\n\n    current.column.appendChild(current.wrapper)\n\n    current.blocksWrapper =\n      current.wrapper.getElementsByClassName('blocks-wrapper')[0]\n\n    if (mappedWrapper.columns > 0) {\n      const chunks = chunkArray(blocks, mappedWrapper.columns)\n      const className = current.blocksWrapper.classList.toString()\n      current.blocksWrapper.removeAttribute('class')\n      chunks.map((chunk, i) => {\n        const obj = {\n          tag: current.blocksWrapper.tagName.toLowerCase(),\n          class: className,\n          children: chunk\n        }\n        current.block = json2html(obj)\n        current.blocksWrapper.appendChild(current.block)\n        overflown(title, layout, current.block, i, true, clonedBlockLayout)\n      })\n    } else {\n      blocks.map((block: any, i: number) => {\n        current.block = json2html(block)\n        current.blocksWrapper.appendChild(current.block)\n        overflown(title, layout, current.block, i, false, clonedBlockLayout)\n      })\n    }\n  }\n\n  const mapMultiBlock = (json: any, data: any) => {\n    if (Array.isArray(data) && data.length > 0) {\n      const mapped = data.map((item) => {\n        const block = JSON.parse(JSON.stringify(json.block))\n        const keys = deepKeys(item)\n        return mapKeys(block, keys, item)\n      })\n      mapBlockLayout(\n        json.title,\n        json.layout,\n        mapped,\n        JSON.parse(JSON.stringify(json.block))\n      )\n    }\n  }\n  const mapSingleBlock = (\n    json: any,\n    title: string,\n    data: any,\n    col: HTMLElement\n  ) => {\n    const blockName = 'blocks-wrapper'\n    const foundKeys = []\n    const mapper = (json: any, title: string, data: any) => {\n      if (json.name !== 'element') {\n        if (json.name === 'title') {\n          json.text = title\n        } else {\n          if (data[json.name]) {\n            foundKeys.push(json.name)\n            if (json.name === 'about_info' || json.name === 'description') {\n              json.html = data[json.name]\n            } else {\n              json.text = data[json.name]\n            }\n          }\n        }\n      }\n      if (json.parent && !data[json.parent]) {\n        if (json.tag === 'img') {\n          json.tag = 'span'\n          json.src = ''\n        }\n        if (json.text) json.text = ''\n        if (json.html) json.html = ''\n      }\n      for (const child of json.children) mapper(child, title, data)\n      return json\n    }\n\n    const mapped = mapper(json, title, data)\n    if (mapped) {\n      if (foundKeys.length === 0) return\n      current.column = col\n      current.block = json2html(mapped)\n\n      current.column.appendChild(current.block)\n      current.column.classList.remove('not-filled')\n\n      current.blocksWrapper = current.block.querySelector('.' + blockName)\n      if (!current.blocksWrapper) return\n      const childBlocks = Array.from(current.blocksWrapper.children).splice(\n        0,\n        current.blocksWrapper.children.length\n      )\n      current.blocksWrapper.innerHTML = ''\n      childBlocks.forEach((block: any, i: number) => {\n        current.blocksWrapper.appendChild(block)\n\n        const pageRect = current.page.getBoundingClientRect()\n        const pageOffset = pageRect.y + window.scrollY + pageRect.height\n\n        const blockRect = block.getBoundingClientRect()\n        const offsetVals = blockRect.y + window.scrollY + buffer\n        const blockOffset = blockRect.height + offsetVals\n        if (blockOffset >= pageOffset) {\n          let page: any\n          if (current.pageNo >= Object.keys(pages).length) {\n            page = secondaryLayout.cloneNode(true)\n            pages[current.pageNo + 1] = {\n              page,\n              cols: [...page.querySelectorAll('.template_column')]\n            }\n            templateWrapper.appendChild(page)\n          } else {\n            page = pages[current.pageNo + 1].page\n          }\n          current.page = page\n          current.pageNo = current.pageNo + 1\n          current.wrapper = current.block.cloneNode(true)\n          current.page.appendChild(current.wrapper)\n          current.blocksWrapper = current.wrapper.querySelector('.' + blockName)\n          current.blocksWrapper.innerHTML = ''\n          current.blocksWrapper.appendChild(block)\n          const secCol = [...page.querySelectorAll('.template_column')]\n          const found = secCol.filter(\n            (col) =>\n              col.getAttribute('data-blocks') ===\n              current.column.getAttribute('data-blocks')\n          )[0]\n          current.column = found\n          current.column.appendChild(current.wrapper)\n          current.column.classList.remove('not-filled')\n          if (i >= 1) {\n            const heading = current.wrapper.getElementsByClassName('title')[0]\n            heading && heading.parentElement.removeChild(heading)\n          }\n        }\n      })\n    }\n  }\n\n  const mapBlocks = (\n    blocks: any,\n    data: any,\n    columns: any,\n    page: HTMLElement\n  ) => {\n    pages['1'] = { page, cols: columns }\n    columns.length > 0 &&\n      columns.forEach((col: any) => {\n        current.page = pages['1'].page\n        current.pageNo = 1\n        current.column = col\n        const attr = col.getAttribute('data-blocks').split(' ')\n        attr.forEach((key: string) => {\n          if (!blocks[key]) return\n          if (blocks[key].multiple) {\n            mapMultiBlock(blocks[key], data[key])\n          } else {\n            mapSingleBlock(blocks[key].layout, blocks[key].title, data, col)\n          }\n        })\n      })\n  }\n\n  const mapLayout = (layout: any, data: any) => {\n    const mapper = (layout: any, data: any) => {\n      const keys = deepKeys(data)\n      keys.forEach((k: string) => {\n        const key = k.split('.')\n        const val = getKeyVal(key, data)\n        if (typeof val === 'string' && layout.name === k) {\n          if (k === 'avatar.processed') {\n            layout.src = val\n          } else {\n            layout.text = val\n          }\n        }\n        if (layout.parent && !data[layout.parent]) {\n          if (layout.tag === 'img') {\n            layout.tag = 'span'\n            layout.src = ''\n          }\n          if (layout.text) layout.text = ''\n          if (layout.html) layout.html = ''\n        }\n      })\n      for (const child of layout.children) mapper(child, data)\n    }\n    mapper(layout, data)\n\n    return layout\n  }\n\n  const layout = mapLayout(initialJson.layout, initialData)\n  const createLayout = json2html(layout)\n  const newPage = templateWrapper.appendChild(createLayout)\n  const columns = [...newPage.querySelectorAll('.template_column')]\n\n  initialJson.blocks &&\n    mapBlocks(initialJson.blocks, initialData, columns, newPage)\n\n  const empty: Array<any> = []\n  Object.keys(pages).forEach((key) => {\n    empty.push(...pages[key].page.querySelectorAll('.removable-blocks'))\n\n    if (empty.length > 0) {\n      empty.forEach((el) => {\n        const blocks = el.querySelectorAll('.block')\n        if (blocks.length === 0) el.remove()\n        return\n      })\n    }\n  })\n\n  return pages\n}\n\nexport default templateMapper\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./template_global.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./template_global.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { Fragment, useEffect, useRef, useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport styled from 'styled-components'\nimport DownArrowIcon from '../../components/svgs/downArrow'\nimport PreviewSkeleton from '../../components/ui/previewSkeleton'\nimport { useViewport } from '../../contexts/viewPort'\nimport { loadFonts } from '../../helpers/loadFonts'\nimport templateMapper from '../../helpers/templateMapper'\nimport { getResumeTemplate } from '../../queries/resumeQueries'\nimport { Button } from '../../styled/button'\nimport '../../styled/template_global.css'\n\nconst ViewResume = ({\n  resumeData,\n  handleShow,\n}: {\n  resumeData: Record<string, any>\n  handleShow: (_show: boolean) => void\n}) => {\n  const data = resumeData.fields || null\n  const [cssReady, setCssReady] = useState(false)\n  const [fontsReady, setFontsReady] = useState(false)\n  const [isTemplateMapping, setIsTemplateMapping] = useState(false)\n  const [pages, setPages] = useState(1)\n  const [curr, setCurr] = useState(1)\n  const { width, height } = useViewport()\n  const queryEnabled = !!resumeData.template || false\n  const navigate = useNavigate()\n  const {\n    data: templateData,\n    isLoading: isTemplateLoading,\n    isError: isTemplateError,\n  } = getResumeTemplate(resumeData.template, queryEnabled)\n\n  const isTemplateReady =\n    cssReady && !isTemplateLoading && templateData && fontsReady && queryEnabled\n\n  const ref = useRef<HTMLDivElement>(null)\n  const loadTemplateFonts = async () => {\n    await loadFonts(templateData.fonts)\n    return setFontsReady(true)\n  }\n  useEffect(() => {\n    if (\n      !queryEnabled ||\n      !templateData ||\n      !templateData.fonts ||\n      templateData.fonts === 0\n    )\n      return\n    setFontsReady(false)\n    loadTemplateFonts()\n\n    return () => setFontsReady(true)\n  }, [templateData, queryEnabled])\n\n  useEffect(() => {\n    if (!document || !queryEnabled || cssReady) return\n    const old = document.getElementById('css_style')\n    if (old) {\n      old.remove()\n    }\n    const link = document.createElement('link')\n    link.id = 'css_style'\n    link.setAttribute('rel', 'stylesheet')\n    link.setAttribute('type', 'text/css')\n    link.setAttribute(\n      'href',\n      `${process.env.API_HOST}/css/resumes/${resumeData.template}.css`\n    )\n\n    document.head.appendChild(link)\n\n    /* istanbul ignore next */\n    link.onload = () => {\n      setCssReady(true)\n    }\n    /* istanbul ignore next */\n    link.onerror = () => {\n      return console.log('stylesheet could not be loaded')\n    }\n  }, [cssReady, queryEnabled])\n\n  const scale = 1\n  useEffect(() => {\n    if (!ref || !ref.current || !templateData) return\n    const page = ref.current.children[0] as HTMLElement\n    page.style.transform = `scale(${scale})`\n  }, [data, ref, templateData, width, height])\n\n  useEffect(() => {\n    if (!data || !isTemplateReady) return\n    setIsTemplateMapping(true)\n    const timer = setTimeout(() => {\n      if (!ref || !ref.current) return\n\n      const page = ref.current.querySelector('.page')\n      if (!page) return\n      const wrapper = page.children[0] as HTMLElement\n\n      if (!wrapper) return\n      const template = JSON.parse(JSON.stringify(templateData))\n      wrapper.innerHTML = ''\n      const pages = templateMapper(template, data, wrapper, 0)\n      if (!pages) return\n      updatePages(Object.keys(pages).length)\n      setCurr(1)\n      setIsTemplateMapping(false)\n    }, 500)\n    return () => clearTimeout(timer)\n  }, [data, ref.current, isTemplateReady])\n\n  useEffect(() => {\n    if (!ref || !ref.current) return\n    const page = ref.current.querySelector('.page') as HTMLElement\n    if (!page) return\n    const wrapper = page.children[0] as HTMLElement\n    if (!wrapper) return\n    wrapper.style.transform = `translateY(-${page.clientHeight * (curr - 1)}px)`\n    wrapper.style.height = page.clientHeight * curr + 'px'\n  }, [curr, ref.current])\n\n  const updatePages = (total: number) => {\n    curr > total && setCurr(total)\n    setPages(total)\n  }\n\n  const handleClick = (type: 'prev' | 'next') => {\n    if (type === 'prev') curr > 1 && curr <= pages && setCurr(curr - 1)\n    if (type === 'next') curr >= 1 && curr < pages && setCurr(curr + 1)\n    return\n  }\n\n  return (\n    <MainWrapper>\n      <HeadWrapper>\n        <Button btnType=\"ghost\" size=\"lg\" onClick={() => handleShow(false)}>\n          Back to Chats\n        </Button>\n      </HeadWrapper>\n      {isTemplateError ? (\n        <div className=\"align-center\" style={{ height: '90%', flex: 1 }}>\n          <h3>Failed to load resume!</h3>\n        </div>\n      ) : (\n        <Fragment>\n          <Wrapper>\n            {(!isTemplateReady ||\n              !data ||\n              isTemplateMapping ||\n              isTemplateLoading) && (\n              <SkeletonWrapper data-test-id=\"resume_skeleton\">\n                <PreviewSkeleton scale={scale} />\n              </SkeletonWrapper>\n            )}\n\n            <TemplateWrapper\n              ref={ref}\n              style={\n                !isTemplateReady ||\n                !data ||\n                isTemplateMapping ||\n                isTemplateLoading\n                  ? { visibility: 'hidden' }\n                  : { visibility: 'visible' }\n              }\n            >\n              <div className=\"page\">\n                <div style={{ width: '100%' }} />\n              </div>\n            </TemplateWrapper>\n          </Wrapper>\n          <PageToggler>\n            <button\n              type=\"button\"\n              style={{ transform: 'rotateZ(90deg)' }}\n              onClick={() => handleClick('prev')}\n            >\n              <DownArrowIcon size=\"0.75rem\" color=\"#fff\" />\n            </button>\n            <p>\n              {curr}&nbsp;/&nbsp;{pages}\n            </p>\n            <button\n              type=\"button\"\n              style={{ transform: 'rotateZ(270deg)' }}\n              onClick={() => handleClick('next')}\n            >\n              <DownArrowIcon size=\"0.75rem\" color=\"#fff\" />\n            </button>\n          </PageToggler>\n        </Fragment>\n      )}\n    </MainWrapper>\n  )\n}\n\nexport default ViewResume\n\nconst SkeletonWrapper = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  padding: 3rem 0 10rem;\n`\nconst HeadWrapper = styled.div`\n  display: flex;\n  padding: 1rem 3rem;\n  justify-content: space-between;\n  top: 0;\n  left: 0;\n  width: 100%;\n  border-bottom: 2px solid #eee;\n  background-color: #fff;\n  z-index: 100;\n`\nconst MainWrapper = styled.div`\n  display: block;\n  position: relative;\n  height: 100vh;\n  width: 100%;\n  overflow: hidden;\n`\nconst Wrapper = styled.div`\n  display: flex;\n  position: relative;\n  margin: auto;\n  height: 100vh;\n  width: 100%;\n  overflow-y: scroll;\n  padding: 3rem 0 10rem;\n  background-color: #f7f9fc;\n`\nconst TemplateWrapper = styled.div`\n  min-height: 297mm;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n\n  .page {\n    position: relative;\n    box-shadow: 0px 0px 15px 0px #0000000f;\n    border: 1px solid #eee;\n  }\n`\n\nconst PageToggler = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: auto;\n  max-width: 100px;\n  bottom: 10%;\n  z-index: 10;\n  height: 35px;\n  border-radius: 6px;\n  background-color: ${({ theme }) => theme.colors.primary};\n  p {\n    font-weight: 600;\n  }\n  button {\n    padding-left: 0.7rem;\n    padding-right: 0.7rem;\n    svg {\n      path {\n        stroke-width: 1.5;\n      }\n    }\n  }\n`\n","import axios from 'axios'\nimport getQueryAdvance from '../hooks/getQueryAdvance'\n\n/**\n * Gets single resume template\n * @param template resume template object _id\n * @param enabled should quey be enabled?\n * @returns UseQueryResult\n */\nexport const getResumeTemplate = (template: string, enabled?: boolean) => {\n  const fetcher = async (name: string) => {\n    const { data } = await axios.get(`/templates/resume/${name}`)\n    return data\n  }\n\n  return getQueryAdvance(\n    ['resumeTemplates', template],\n    () => fetcher(template),\n    enabled\n  )\n}\n","import axios from 'axios'\nimport React, { Fragment, useState } from 'react'\nimport styled from 'styled-components'\nimport FileIcon from '../../components/svgs/files'\nimport ImageIcon from '../../components/svgs/image'\nimport PlayIcon from '../../components/svgs/play'\nimport CircularProgress from '../../components/ui/CircularProgress'\nimport { useNotify } from '../../contexts/notify'\n\nconst AttachmentDownload = ({\n  chat_id,\n  attachment,\n  senderType,\n}: {\n  chat_id: string\n  attachment: Record<string, any>\n  senderType: 'reviewer' | 'user'\n}) => {\n  const [progress, setProgress] = useState(0)\n  const [isDownloading, setIsDownloading] = useState(false)\n  const { setNotify } = useNotify()\n\n  const openAttachement = async (chatId: string, id: string) => {\n    if (isDownloading) return\n    setIsDownloading(true)\n    await downloadAttachment(chatId, id).then((res: any) => {\n      if (!res || !res.data) {\n        setIsDownloading(false)\n        return setNotify({\n          type: 'danger',\n          heading: 'Err!',\n          message: 'Failed to download attachment!',\n        })\n      }\n      const url = window.URL.createObjectURL(\n        new Blob([res.data], {\n          type: res.headers['content-type'],\n        })\n      )\n      const link = document.createElement('a')\n      link.href = url\n      const name =\n        res.headers['content-disposition']\n          .split('filename=\"')[1]\n          .split('\"')[0] || 'attachment'\n\n      link.setAttribute('download', name)\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n      window.URL.revokeObjectURL(url)\n      return setIsDownloading(false)\n    })\n  }\n\n  const downloadAttachment = async (chatId: string, id: string) => {\n    let res\n    const options = {\n      method: 'GET',\n      url: `/management/chat/attachments`,\n      params: { chatId, id },\n      responseType: 'blob',\n      onDownloadProgress: (progressEvent: any) => {\n        const percentage = Math.round(\n          (progressEvent.loaded * 100) / progressEvent.total\n        ) as any\n        setProgress(percentage)\n      },\n    }\n    try {\n      res = await axios.request(options as any)\n      return res\n    } catch (err) {\n      return (res = null)\n    }\n  }\n\n  return (\n    <Fragment>\n      <StyledFile\n        type={senderType}\n        className={`${isDownloading ? 'downloading' : 'idle'}`}\n        onClick={() => openAttachement(chat_id, attachment._id)}\n      >\n        <span className={`icon `}>\n          {isDownloading ? (\n            <CircularProgress progress={progress} />\n          ) : attachment.mimeType ? (\n            attachment.mimeType.split('/')[0] === 'image' ? (\n              <ImageIcon color=\"#fff\" size=\"1.2rem\" />\n            ) : attachment.mimeType.split('/')[0] === 'video' ? (\n              <PlayIcon color=\"#fff\" size=\"1.2rem\" />\n            ) : (\n              <FileIcon color=\"#fff\" size=\"1.2rem\" />\n            )\n          ) : (\n            <FileIcon color=\"#fff\" size=\"1.2rem\" />\n          )}\n        </span>\n        <p className=\"truncate\">{attachment.name}</p>\n      </StyledFile>\n    </Fragment>\n  )\n}\n\nexport default AttachmentDownload\n\nconst StyledFile = styled.div<{ type: 'reviewer' | 'user' }>`\n  width: 300px;\n  height: 40px;\n  display: grid;\n  grid-template-columns: 40px auto 30px;\n  border: 1px solid\n    ${({ type }) =>\n      type === 'user' ? 'rgba(238, 238, 238, 0.2)' : 'rgba(52, 52, 52, 0.2)'};\n  border-radius: 6px;\n  margin: 0.5rem 0;\n  overflow: hidden;\n  align-items: center;\n  position: relative;\n  cursor: pointer;\n  background-color: ${({ type }) =>\n    type === 'user' ? 'rgba(238, 238, 238, 0.2)' : 'rgba(52, 52, 52, 0.2)'};\n  &:before {\n    visibility: hidden;\n    position: absolute;\n    width: 40px;\n    height: 40px;\n    content: '';\n    display: block;\n    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuMi4wIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIyIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMzQ0IDI0MGgtNTZMMjg3LjEgMTUyYzAtMTMuMjUtMTAuNzUtMjQtMjQtMjRoLTE2QzIzNC43IDEyOCAyMjMuMSAxMzguOCAyMjMuMSAxNTJMMjI0IDI0MGgtNTZjLTkuNTMxIDAtMTguMTYgNS42NTYtMjIgMTQuMzhDMTQyLjIgMjYzLjEgMTQzLjkgMjczLjMgMTUwLjQgMjgwLjNsODguNzUgOTZDMjQzLjcgMzgxLjIgMjUwLjEgMzg0IDI1Ni44IDM4NGM3Ljc4MS0uMzEyNSAxMy4yNS0yLjg3NSAxNy43NS03Ljg0NGw4Ny4yNS05NmM2LjQwNi03LjAzMSA4LjAzMS0xNy4xOSA0LjE4OC0yNS44OFMzNTMuNSAyNDAgMzQ0IDI0MHpNMjU2IDBDMTE0LjYgMCAwIDExNC42IDAgMjU2czExNC42IDI1NiAyNTYgMjU2czI1Ni0xMTQuNiAyNTYtMjU2UzM5Ny40IDAgMjU2IDB6TTI1NiA0NjRjLTExNC43IDAtMjA4LTkzLjMxLTIwOC0yMDhTMTQxLjMgNDggMjU2IDQ4czIwOCA5My4zMSAyMDggMjA4UzM3MC43IDQ2NCAyNTYgNDY0eiIvPjwvc3ZnPg==');\n    background-repeat: no-repeat;\n    background-size: 2rem;\n    background-position: center;\n    background-color: ${({ type }) =>\n      type === 'user' ? 'rgba(238, 238, 238, 0.2)' : 'rgba(52, 52, 52, 0.2)'};\n    top: 0;\n    left: 0;\n    margin: auto;\n  }\n  .icon {\n    opacity: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 6px;\n    background-color: ${({ type }) =>\n      type === 'user' ? 'rgba(238, 238, 238, 0.5)' : 'rgba(52, 52, 52, 0.2)'};\n    height: 100%;\n  }\n  &.idle:hover {\n    &:before {\n      visibility: visible;\n    }\n    .icon {\n      opacity: 0;\n    }\n  }\n  .remove {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n  p {\n    margin: 0 0.7rem !important;\n    font-size: 0.8rem;\n  }\n`\n","import { Fragment, useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport DashPageHeader from '../../components/ui/dashPageHeader'\nimport MessageBox from './MessageBox'\nimport { chatFetcher, getReviewTicketById } from '../../queries/chatQueries'\nimport { useInfiniteQuery, useMutation, useQueryClient } from 'react-query'\nimport ReactHtmlParser from 'react-html-parser'\nimport { useNavigate, useParams, useSearchParams } from 'react-router-dom'\nimport { LoadingDots, LoadingWrapper, Spinner } from '../../styled/loader'\nimport { Button } from '../../styled/button'\nimport ReviewSidebar from './reviewSidebar'\nimport axios from 'axios'\nimport { useNotify } from '../../contexts/notify'\nimport WarningIcon from '../../components/svgs/warning'\nimport ViewResume from './viewResume'\nimport AttachmentDownload from './AttachmentDownload'\nimport ReactDOMServer from 'react-dom/server'\nimport { Emoji } from 'emoji-picker-react'\nimport Confirmation from '../../components/ui/confirmation'\n\nconst ReviewChat = () => {\n  const [searchParams] = useSearchParams()\n  const [show, setShow] = useState(false)\n  const { ticket } = useParams<{ ticket: string }>()\n  const resumeId = searchParams.get('ref')\n  const preview = searchParams.get('preview')\n  const [showPreview, setShowPreview] = useState(preview || false)\n\n  const navigate = useNavigate()\n  const { setNotify } = useNotify()\n  const queryClient = useQueryClient()\n  const {\n    data: ticketData,\n    isLoading: ticketLoading,\n    isError: ticketError,\n  } = getReviewTicketById({ ticket } as any)\n  const ticketStatus = (ticketData && ticketData.status === 'open') || false\n\n  const {\n    isLoading,\n    isError,\n    data,\n    isFetching,\n    hasNextPage,\n    fetchNextPage,\n    isFetchingNextPage,\n  } = useInfiniteQuery(\n    ['chats', ticket],\n    ({ pageParam = 0 }) =>\n      chatFetcher({ ticketId: ticket as string, page: pageParam, limit: 5 }),\n    {\n      getNextPageParam: (lastPage: any, pages) => {\n        const hasNext =\n          lastPage.page + 1 < Math.ceil(lastPage.total / lastPage.limit)\n        if (hasNext) return pages.length\n        return undefined\n      },\n      enabled: ticket !== 'new' && !preview,\n      refetchOnWindowFocus: ticket !== 'new' && !preview && ticketStatus,\n      refetchInterval:\n        ticket !== 'new' && !preview && ticketStatus ? 1000 * 60 : 0,\n    }\n  )\n\n  const firstPageLength =\n    data &&\n    data.pages &&\n    data.pages[0] &&\n    data.pages[0].items &&\n    data.pages[0].items.length\n\n  const pagesLength = data?.pages.length\n\n  useEffect(() => {\n    const messageSection = document.getElementById('message-section')\n    if (!messageSection) return\n    const lastPage =\n      data && data.pages.length > 1 && data.pages[data.pages.length - 1]\n    if (!lastPage) return\n    const lastItem =\n      lastPage.items &&\n      lastPage.items.length > 0 &&\n      lastPage.items[lastPage.items.length - 1]\n    if (!lastItem || !lastItem._id) return\n    const element = document.getElementById(lastItem._id)\n    if (!element) return\n    messageSection.scrollTop = element?.offsetTop\n  }, [pagesLength])\n\n  useEffect(() => {\n    return scrollToBottom('first-page-length')\n  }, [firstPageLength])\n\n  useEffect(() => {\n    if (isLoading) return\n    const wrapper = document.getElementById('main-section')\n    const header = document.querySelector('header')\n    const messageBox = document.getElementById('message-box')\n    const messageSection = document.getElementById('message-section')\n\n    if (!wrapper || !header || !messageBox || !messageSection) return\n    wrapper.style.maxHeight = '100vh'\n    messageSection.style.overflowY = 'scroll'\n    messageSection.style.height = `${\n      wrapper.clientHeight - header.clientHeight - messageBox.clientHeight\n    }px`\n    messageSection.focus()\n    scrollToBottom()\n\n    const timer = setTimeout(() => {\n      messageSection.style.opacity = '1'\n      messageBox.style.opacity = '1'\n    }, 500)\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [isLoading, preview, ticketStatus])\n\n  const scrollToBottom = (val?: 'first-page-length' | undefined) => {\n    if (\n      (data && data.pages.length === 1) ||\n      (val === 'first-page-length' &&\n        data &&\n        firstPageLength > data.pages[0].limit)\n    ) {\n      const messageSection = document.getElementById('message-section')\n      if (!messageSection) return\n      messageSection.scrollTop = messageSection.scrollHeight\n    }\n    return\n  }\n\n  const closeTicket = useMutation(\n    (reqData: any) =>\n      axios.post(`/management/resume-review/close/${reqData.ticket}`),\n    {\n      onSuccess: () => {\n        queryClient.setQueryData(['reviewTicket', ticket], (queryData: any) => {\n          return { ...queryData, status: 'closed' }\n        })\n        setShow(false)\n        navigate('/resume-review')\n      },\n      onError: () => {\n        setNotify({\n          type: 'danger',\n          heading: 'Err!',\n          message: 'Failed to close ticket',\n        })\n      },\n      // onSettled: () => {},\n    }\n  )\n\n  const handleTickeClose = () => {\n    return closeTicket.mutate({ ticket })\n  }\n\n  const parseMessage = (val: string) => {\n    const dummy = document.createElement('div')\n    dummy.innerHTML = val\n    const element =\n      dummy.children.length === 1 && (dummy.children[0] as HTMLElement)\n    let size = 20\n    if (element && element.children.length > 0) {\n      if (\n        element.children.length === 1 &&\n        Array.from(element.childNodes).filter((child) => child.nodeType === 3)\n          .length === 0\n      ) {\n        size = 40\n      }\n    }\n    const emojis = dummy.querySelectorAll('span.composer-emoji') as any\n    if (emojis && emojis.length > 0) {\n      emojis.forEach((item: HTMLElement) => {\n        item.className = 'emoji-icon'\n        return (item.innerHTML = ReactDOMServer.renderToString(\n          <Emoji unified={item.title} size={size} />\n        ))\n      })\n    }\n\n    return dummy.innerHTML\n  }\n\n  const handeShowResume = (show: boolean) => {\n    !show ? navigate({ search: '' }) : navigate({ search: '?preview=true' })\n    return setShowPreview(show)\n  }\n\n  return (\n    <Fragment>\n      <ReviewSidebar\n        data={ticketData}\n        isLoading={ticketLoading}\n        isError={ticketError}\n        handleShowResume={handeShowResume}\n      />\n      <div>\n        <Content id=\"main-section\">\n          {ticketData && ticketData.resume && showPreview ? (\n            <ViewResume\n              resumeData={ticketData.resume}\n              handleShow={handeShowResume}\n            />\n          ) : (\n            <Fragment>\n              <DashPageHeader title=\"Customer Support Chat\">\n                {ticketData && ticketData.status === 'open' && (\n                  <Button size=\"lg\" onClick={() => setShow(true)}>\n                    Close Ticket\n                  </Button>\n                )}\n              </DashPageHeader>\n\n              {isError ? (\n                <div\n                  className=\"align-center\"\n                  style={{ height: '90%', flex: 1 }}\n                >\n                  <h3>Failed to load chat!</h3>\n                </div>\n              ) : isLoading ? (\n                <LoadingWrapper style={{ height: '90%' }}>\n                  <Spinner size=\"2rem\" type=\"primary\" />\n                </LoadingWrapper>\n              ) : (\n                <Fragment>\n                  <Confirmation\n                    show={show}\n                    title=\"Are you sure?\"\n                    msg=\"You want to close ticket\"\n                  >\n                    <Button\n                      size=\"lg\"\n                      onClick={() => handleTickeClose()}\n                      disabled={closeTicket.isLoading}\n                    >\n                      Yes\n                    </Button>\n                    <Button\n                      size=\"lg\"\n                      onClick={() => setShow(false)}\n                      disabled={closeTicket.isLoading}\n                    >\n                      No\n                    </Button>\n                  </Confirmation>\n                  <MessageSection id=\"message-section\" style={{ opacity: 0 }}>\n                    <ChatSection>\n                      {hasNextPage && (\n                        <div className=\"load-more\">\n                          <a onClick={() => fetchNextPage()}>\n                            {!isFetchingNextPage ? (\n                              'Load older messages'\n                            ) : (\n                              <LoadingDots color=\"rgba(240, 132, 56, 1)\">\n                                Loading Messages\n                              </LoadingDots>\n                            )}\n                          </a>\n                        </div>\n                      )}\n\n                      {data &&\n                        data.pages &&\n                        data?.pages\n                          .map(data?.pages.pop, [...data.pages])\n                          .map((group, i) => (\n                            <Fragment key={i}>\n                              {group &&\n                                group.items &&\n                                group.items.length > 0 &&\n                                group.items\n                                  .map(group.items.pop, [...group.items])\n                                  .map(\n                                    (item: Record<string, any>, i: number) => (\n                                      <ChatWrapper\n                                        type={\n                                          item.senderType &&\n                                          item.senderType === 'reviewer'\n                                            ? 'sender'\n                                            : 'reciever'\n                                        }\n                                        key={i}\n                                        id={item._id}\n                                      >\n                                        <div className=\"message\">\n                                          <p className=\"label\">\n                                            {item.senderType &&\n                                            item.senderType === 'reviewer'\n                                              ? 'You'\n                                              : 'Customer'}\n                                          </p>\n                                          <div className=\"bubble\">\n                                            {item.message && (\n                                              <div>\n                                                {ReactHtmlParser(\n                                                  parseMessage(item.message)\n                                                )}\n                                              </div>\n                                            )}\n                                            {item.attachments &&\n                                              item.attachments.length > 0 &&\n                                              item.attachments.map(\n                                                (\n                                                  attachment: Record<\n                                                    string,\n                                                    any\n                                                  >,\n                                                  i: number\n                                                ) => (\n                                                  <Fragment key={i}>\n                                                    <AttachmentDownload\n                                                      attachment={attachment}\n                                                      chat_id={item._id}\n                                                      senderType={\n                                                        item.senderType\n                                                      }\n                                                    />\n                                                  </Fragment>\n                                                )\n                                              )}\n                                          </div>\n                                        </div>\n                                      </ChatWrapper>\n                                    )\n                                  )}\n                            </Fragment>\n                          ))}\n                    </ChatSection>\n                  </MessageSection>\n                  {!ticketData || ticketStatus ? (\n                    <MessageBox\n                      isFetchingMessage={isFetching && !isFetchingNextPage}\n                      ticket={ticket as string}\n                      resumeId={resumeId as string}\n                      style={{ opacity: 0 }}\n                    />\n                  ) : (\n                    <AlertBox id=\"message-box\">\n                      <span>\n                        <WarningIcon size=\"1.3rem\" />\n                      </span>\n                      <p>Ticket has been closed!</p>\n                    </AlertBox>\n                  )}\n                </Fragment>\n              )}\n            </Fragment>\n          )}\n        </Content>\n      </div>\n    </Fragment>\n  )\n}\n\nexport default ReviewChat\n\nconst AlertBox = styled.div`\n  margin-top: 2rem;\n  display: flex;\n  height: 50px;\n  justify-content: center;\n  align-items: center;\n  background-color: #eee;\n  span {\n    height: fit-content;\n    margin-right: 0.5rem;\n    margin-top: 0.3rem;\n  }\n  p {\n    text-align: center;\n    margin: 0;\n  }\n`\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  margin-left: 260px;\n  min-height: 100vh;\n  overflow-x: hidden;\n`\n\nconst MessageSection = styled.div`\n  display: flex;\n  align-items: flex-end;\n  height: 100%;\n  width: 100%;\n`\nconst ChatSection = styled.div`\n  margin-top: auto;\n  padding: 1.5rem 1.5rem 0;\n  height: fit-content;\n  width: 100%;\n  .load-more {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    justify-content: center;\n    border-bottom: 1px solid rgba(52, 52, 52, 0.2);\n    transition: color ease-in-out 0.2s;\n    a {\n      padding: 0.7rem;\n      text-transform: capitalize;\n      &:hover {\n        color: ${({ theme }) => theme.colors.primary};\n      }\n    }\n  }\n`\nconst ChatWrapper = styled.div<{ type: 'sender' | 'reciever' }>`\n  width: 100%;\n  display: flex;\n  justify-content: ${({ type }) =>\n    type === 'sender' ? 'flex-end' : 'flex-start'};\n  .message {\n    max-width: 50%;\n    width: fit-content;\n  }\n\n  .label {\n    text-align: ${({ type }) => (type === 'sender' ? 'end' : 'start')};\n    margin-bottom: 0.2rem;\n  }\n  .bubble {\n    background-color: #0f102a;\n    background-color: ${({ type }) =>\n      type === 'sender' ? '#F08438' : '#0f102a'};\n    padding: 0.5rem 1rem;\n    border-radius: 6px;\n    color: white;\n    font-size: 0.8rem;\n    p {\n      margin: 0;\n    }\n    .emoji-icon {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      height: fit-content;\n      line-height: 1;\n      position: relative;\n      top: 4px;\n    }\n  }\n`\n","import axios from 'axios'\nimport getQueryAdvance from '../hooks/getQueryAdvance'\n\nexport interface GetReviewParams {\n  id?: string\n  sort?:\n    | 'urgent-tickets'\n    | 'assigned-tickets'\n    | 'unassigned-tickets'\n    | 'open-tickets'\n    | 'completed'\n  page: number\n  limit: number\n}\n\nexport interface GetChatsPatams {\n  ticketId: string\n  page: number\n  limit: number\n}\n\nexport const chatFetcher = async (params: GetChatsPatams) => {\n  const { ticketId, ...rest } = params\n  const { data } = await axios.get(`/management/ticket/${ticketId}`, {\n    params: rest,\n  })\n  return data\n}\n\nexport const getReviewTicketById = ({ ticket }: { ticket: string }) => {\n  const fetcher = async () => {\n    const { data } = await axios.get(`/management/resume-review/${ticket}`)\n    return data\n  }\n  return getQueryAdvance(\n    ['reviewTicket', ticket],\n    () => fetcher(),\n    ticket !== 'new'\n  )\n}\n\nexport const getReviewTickets = (params: GetReviewParams) => {\n  if (\n    params.sort &&\n    [\n      'urgent-tickets',\n      'open-tickets',\n      'assigned-tickets',\n      'unassigned-tickets',\n      'completed',\n    ].indexOf(params.sort) === -1\n  ) {\n    return { data: undefined, isLoading: false, isError: false }\n  }\n  const fetcher = async () => {\n    const { data } = await axios.get(`/management/resume-review`, { params })\n    return data\n  }\n  return getQueryAdvance(['resumeReview', params], () => fetcher())\n}\n\nexport const getReviewers = (enabled?: boolean) => {\n  const fetcher = async () => {\n    const { data } = await axios.get(`/management/reviewers`)\n    return data\n  }\n  return getQueryAdvance('reviewers', () => fetcher(), enabled)\n}\n","import styled from 'styled-components'\n\nexport const Button = styled.button<{\n  btnType?: 'primary' | 'secondary' | 'ghost' | 'text' | 'link' | 'danger'\n  size?: 'lg' | 'sm' | 'xl'\n  fontSize?: string\n  backgroundColor?: string\n  color?: string\n  width?: string\n}>`\n  background-color: ${({ btnType, theme, backgroundColor }) =>\n    backgroundColor\n      ? backgroundColor\n      : btnType === 'secondary' || btnType === 'text' || btnType === 'link'\n      ? theme.colors.white\n      : btnType === 'ghost'\n      ? theme.colors.light\n      : btnType === 'danger'\n      ? theme.shades.danger\n      : theme.colors.primary};\n  height: ${({ size }) =>\n    size === 'xl' ? '48px' : size === 'lg' ? '40px' : '32px'};\n  color: ${({ btnType, theme, disabled, color }) =>\n    !disabled\n      ? color\n        ? color\n        : btnType === 'secondary' || btnType === 'link'\n        ? theme.colors.primary\n        : btnType === 'ghost' || btnType === 'text'\n        ? theme.colors.dark\n        : btnType === 'danger'\n        ? theme.colors.danger\n        : theme.colors.white\n      : theme.colors.white};\n  border: 1px solid\n    ${({ btnType, theme, disabled }) =>\n      !disabled\n        ? btnType === 'secondary' || btnType === 'primary'\n          ? theme.colors.primary\n          : 'transparent'\n        : 'transparent'};\n  user-select: none;\n  font-size: ${({ fontSize }) => fontSize || '0.875rem'};\n  text-align: center;\n  justify-content: center;\n  font-weight: normal;\n  font-style: normal;\n  letter-spacing: 0.035em;\n  width: ${({ size, width }) =>\n    width ? width : size === 'xl' ? '200px' : '150px'};\n  padding: 0;\n  border-radius: 4px;\n  margin: 0;\n  transition: background 300ms ease-in-out;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  text-align: center;\n  transition: all 150ms ease-in-out;\n  &:hover,\n  &:focus {\n    ${({ btnType, theme }) =>\n      btnType === 'primary'\n        ? `box-shadow: 0 0 1px 3px ${theme.shades.primary[3]}`\n        : btnType === 'secondary'\n        ? `background-color: ${theme.colors.primary}; color:#fff;`\n        : btnType === 'danger'\n        ? `background-color: ${theme.colors.danger}; color:#fff;`\n        : btnType === 'ghost'\n        ? `background-color: #e6e6e6`\n        : null};\n  }\n\n  @media (max-width: 834px) {\n    width: ${({ size }) => (size === 'xl' ? '160px' : '115px')};\n    height: ${({ size }) =>\n      size === 'xl' ? '40px' : size === 'lg' ? '40px' : '32px'};\n    font-size: 0.875rem;\n  }\n  @media (max-width: 480px) {\n    width: ${({ size }) => (size === 'xl' ? '130px' : '100px')};\n    height: ${({ size }) =>\n      size === 'xl' ? '32px' : size === 'lg' ? '40px' : '32px'};\n    font-size: 0.75rem;\n  }\n`\n\nexport const LinkButton = styled.span`\n  display: flex;\n  height: 32px;\n  align-items: center;\n  width: fit-content;\n  padding: 0 1rem;\n  border: 1px solid ${({ theme }) => theme.colors.primary};\n  color: ${({ theme }) => theme.colors.primary};\n  border-radius: 6px;\n`\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mt {\\n  margin-top: 3rem !important;\\n}\\n.page {\\n  width: 210mm;\\n  height: 297mm;\\n  box-sizing: border-box;\\n  margin: auto;\\n  padding: 0;\\n  transform: scale(0.6);\\n  overflow: hidden;\\n  position: absolute;\\n}\\n\\n.page h1,\\n.page h2,\\n.page h3,\\n.page h4,\\n.page h5,\\n.page p,\\n.page li,\\n.page span,\\n.page b,\\n.page em {\\n  margin: 0.2rem 0;\\n  line-height: 1.2;\\n  word-wrap: break-word;\\n  word-break: break-word;\\n  letter-spacing: 0;\\n}\\n\\n.page .description ul,\\n.page .about_info ul {\\n  margin: 0;\\n  padding: 0;\\n  list-style-position: inside;\\n  list-style-type: disc;\\n}\\n.page .description ol,\\n.page .about_info ol {\\n  margin: 0;\\n  padding: 0;\\n  list-style-position: inside;\\n  list-style-type: auto;\\n}\\n\\n.page .heading {\\n  margin-bottom: 1.5rem;\\n}\\n\\n.page p,\\n.page b,\\n.page em,\\n.page li {\\n  font-size: 0.875rem;\\n  line-height: 1.5;\\n}\\n.page. h1 {\\n  font-size: 2rem !important;\\n}\\n.page h3 {\\n  font-size: 1.25rem !important;\\n}\\n\\n.page ul {\\n  margin: 0;\\n  padding: 0;\\n  list-style-position: inside;\\n  list-style-type: unset;\\n}\\n.page li {\\n  margin-top: 0.3rem;\\n  margin-bottom: 0.3rem;\\n}\\n\\n.page img {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.template_page {\\n  width: 210mm;\\n  min-height: 297mm;\\n  height: 297mm;\\n  display: flex;\\n  flex-direction: column;\\n  background-color: #fff;\\n}\\n\\n.page .uppercase {\\n  text-transform: uppercase;\\n}\\n\\n.page .no-list-style {\\n  list-style-type: none;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/styled/template_global.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,2BAA2B;AAC7B;AACA;EACE,YAAY;EACZ,aAAa;EACb,sBAAsB;EACtB,YAAY;EACZ,UAAU;EACV,qBAAqB;EACrB,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;;;;;;;;;;EAUE,gBAAgB;EAChB,gBAAgB;EAChB,qBAAqB;EACrB,sBAAsB;EACtB,iBAAiB;AACnB;;AAEA;;EAEE,SAAS;EACT,UAAU;EACV,2BAA2B;EAC3B,qBAAqB;AACvB;AACA;;EAEE,SAAS;EACT,UAAU;EACV,2BAA2B;EAC3B,qBAAqB;AACvB;;AAEA;EACE,qBAAqB;AACvB;;AAEA;;;;EAIE,mBAAmB;EACnB,gBAAgB;AAClB;AACA;EACE,0BAA0B;AAC5B;AACA;EACE,6BAA6B;AAC/B;;AAEA;EACE,SAAS;EACT,UAAU;EACV,2BAA2B;EAC3B,sBAAsB;AACxB;AACA;EACE,kBAAkB;EAClB,qBAAqB;AACvB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,aAAa;EACb,aAAa;EACb,sBAAsB;EACtB,sBAAsB;AACxB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,qBAAqB;AACvB\",\"sourcesContent\":[\".mt {\\n  margin-top: 3rem !important;\\n}\\n.page {\\n  width: 210mm;\\n  height: 297mm;\\n  box-sizing: border-box;\\n  margin: auto;\\n  padding: 0;\\n  transform: scale(0.6);\\n  overflow: hidden;\\n  position: absolute;\\n}\\n\\n.page h1,\\n.page h2,\\n.page h3,\\n.page h4,\\n.page h5,\\n.page p,\\n.page li,\\n.page span,\\n.page b,\\n.page em {\\n  margin: 0.2rem 0;\\n  line-height: 1.2;\\n  word-wrap: break-word;\\n  word-break: break-word;\\n  letter-spacing: 0;\\n}\\n\\n.page .description ul,\\n.page .about_info ul {\\n  margin: 0;\\n  padding: 0;\\n  list-style-position: inside;\\n  list-style-type: disc;\\n}\\n.page .description ol,\\n.page .about_info ol {\\n  margin: 0;\\n  padding: 0;\\n  list-style-position: inside;\\n  list-style-type: auto;\\n}\\n\\n.page .heading {\\n  margin-bottom: 1.5rem;\\n}\\n\\n.page p,\\n.page b,\\n.page em,\\n.page li {\\n  font-size: 0.875rem;\\n  line-height: 1.5;\\n}\\n.page. h1 {\\n  font-size: 2rem !important;\\n}\\n.page h3 {\\n  font-size: 1.25rem !important;\\n}\\n\\n.page ul {\\n  margin: 0;\\n  padding: 0;\\n  list-style-position: inside;\\n  list-style-type: unset;\\n}\\n.page li {\\n  margin-top: 0.3rem;\\n  margin-bottom: 0.3rem;\\n}\\n\\n.page img {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.template_page {\\n  width: 210mm;\\n  min-height: 297mm;\\n  height: 297mm;\\n  display: flex;\\n  flex-direction: column;\\n  background-color: #fff;\\n}\\n\\n.page .uppercase {\\n  text-transform: uppercase;\\n}\\n\\n.page .no-list-style {\\n  list-style-type: none;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["forwardRef","ref","name","maxHeight","formats","modules","disabled","placeholder","control","useFormContext","initialModules","toolbar","list","initialFormats","Fragment","Wrapper","className","render","field","value","onChange","onBlur","content","theme","bounds","readOnly","styled","colors","grey","size","color","width","height","viewBox","fill","xmlns","d","stroke","withTheme","show","msg","title","children","Box","primary","ChildWrapper","shades","dark","border","style","Header","useState","isOutside","setIsOutside","useRef","handleClickOutside","e","current","contains","target","useEffect","document","addEventListener","removeEventListener","identifier","fetcher","enabled","params","useAuth","user","token","useQuery","setFiles","setShow","type","setNotify","useNotify","onDrop","useCallback","acceptedFiles","console","log","onDropRejected","rejectedFiles","length","forEach","item","message","file","heading","errors","useDropzone","accept","maxFiles","maxSize","getRootProps","getInputProps","isDragActive","CloseBtn","onClick","DropWrapper","btnType","props","progress","trackWidth","trackColor","indicatorWidth","indicatorColor","indicatorCap","spinnerMode","spinnerSpeed","center","radius","dashArray","Math","PI","dashOffset","CircleIcon","cx","cy","r","strokeWidth","animationDuration","toString","strokeDasharray","strokeDashoffset","strokeLinecap","Spinner","keyframes","onSuccess","handeRemoveFile","onDone","index","setProgress","done","setDone","error","setError","cancelToken","axios","uploadFile","formData","FormData","append","onUploadProgress","progressEvent","percentage","round","loaded","total","then","req","data","err","Alert","StyledFile","indexOf","split","cancel","EmojiBolt","node","classList","add","innerHTML","ReactDOMServer","unified","emojiHTML","Quill","blotName","tagName","ticket","resumeId","isFetchingMessage","detectOutsideClick","quillRef","showDropzone","setShowDropzone","files","filesInProgress","setFilesInProgress","filesToRemove","setFilesToRemove","queryClient","useQueryClient","methods","useForm","mode","defaultValues","attachments","handleSubmit","watch","reset","isSubmitting","formState","useFieldArray","remove","hasMessage","replace","sendMessage","useMutation","reqData","chats","getQueryData","ticketId","pages","items","unshift","limit","page","pageParams","undefined","setQueryData","onError","response","status","queryData","onSubmit","dummy","createElement","emojis","querySelectorAll","innerText","regex","RegExp","mutate","insertEmoji","emojiData","_event","editor","getSelection","selection","insertEmbed","cursorPosition","setSelection","apiDeleteFiles","ids","options","method","url","_err","timer","setTimeout","clearTimeout","handleFileSuccess","_fileIndex","handleRemoveFile","fileIndex","isUploaded","findIndex","prev","_id","newFiles","splice","handleFileDone","handleDropzone","id","hasFiles","onEmojiClick","autoFocusSearch","lazyLoadEmojis","previewConfig","showPreview","emojiStyle","EmojiStyle","emojiVersion","skinTonesDisabled","droppedFiles","RichTextEditor","container","clipboard","matchVisual","map","i","ReviewAccordian","handleShowResume","customer","resume","useNavigate","AccordianWrapper","Accordian","firstName","lastName","createdAt","dayjs","format","isLoading","isError","NavWrapper","NavBrand","LogoWrapper","href","process","src","logoIcon","marginRight","NavLinksWrapper","marginLeft","padding","marginBottom","scale","styles","transform","PreviewLoader","Grid","columns","PreviewAvatar","borderTop","borderRight","Blocks","SK_Thumbnail","SK_Heading","SK_Text","SK_Form_Label","SK_Circle","loadFonts","fonts","Promise","all","font","face","FontFace","weight","load","loadedFonts","initialJson","initialData","templateWrapper","buffer","layout","secondaryLayout","json2html","json","tag","text","textContent","html","blocks","setAttribute","join","child","appendChild","deepKeys","t","pre","Array","isArray","Object","entries","flatMap","k","v","getKeyVal","selectionArray","obj","key","mapKeys","block","keys","val","parent","mapLayoutWrapper","mapper","parseInt","pageNo","wrapper","column","blocksWrapper","overflown","blockIndex","hasColumns","clonedBlockLayout","pageRect","getBoundingClientRect","pageOffset","y","window","scrollY","blockRect","descEl","querySelector","initialPageOffset","pageLayout","childBlocks","from","el","elRect","elOffset","newBlock","mapped","newDescBlock","cloneNode","cols","subMapperLayout","found","filter","col","getAttribute","getElementsByClassName","removeAttribute","parentElement","removeChild","mapDesc","mapLayout","createLayout","newPage","multiple","JSON","parse","stringify","mappedWrapper","chunks","arr","n","chunkLength","max","push","slice","chunkArray","chunk","toLowerCase","class","mapBlockLayout","mapMultiBlock","blockName","foundKeys","offsetVals","mapSingleBlock","mapBlocks","empty","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","template","resumeData","handleShow","fields","cssReady","setCssReady","fontsReady","setFontsReady","isTemplateMapping","setIsTemplateMapping","setPages","curr","setCurr","useViewport","queryEnabled","getQueryAdvance","templateData","isTemplateLoading","isTemplateError","isTemplateReady","loadTemplateFonts","old","getElementById","link","head","onload","onerror","templateMapper","updatePages","clientHeight","handleClick","MainWrapper","HeadWrapper","flex","SkeletonWrapper","TemplateWrapper","visibility","PageToggler","chat_id","attachment","senderType","isDownloading","setIsDownloading","openAttachement","chatId","downloadAttachment","res","URL","createObjectURL","Blob","headers","body","click","revokeObjectURL","responseType","onDownloadProgress","mimeType","useSearchParams","searchParams","useParams","get","preview","setShowPreview","navigate","getReviewTicketById","ticketData","ticketLoading","ticketError","ticketStatus","useInfiniteQuery","pageParam","chatFetcher","getNextPageParam","lastPage","ceil","refetchOnWindowFocus","refetchInterval","isFetching","hasNextPage","fetchNextPage","isFetchingNextPage","firstPageLength","pagesLength","messageSection","lastItem","element","scrollTop","offsetTop","scrollToBottom","header","messageBox","overflowY","focus","opacity","scrollHeight","closeTicket","parseMessage","childNodes","nodeType","handeShowResume","search","Content","MessageSection","ChatSection","pop","group","ChatWrapper","ReactHtmlParser","AlertBox","rest","getReviewTickets","sort","getReviewers","Button","backgroundColor","white","light","danger","fontSize","___CSS_LOADER_EXPORT___","module"],"sourceRoot":""}