(self.webpackChunkmanagement=self.webpackChunkmanagement||[]).push([[260],{3114:(e,n,t)=>{"use strict";t.d(n,{Z:()=>u});var r,s,i,a=t(168),c=t(7294),l=t(8804),d=t(5292),o=t(5893);const u=(0,l.Zz)((function(e){var n=e.theme,t=e.show,r=e.msg,s=e.title,i=e.children;return(0,o.jsx)(c.Fragment,{children:t&&(0,o.jsx)(h,{"data-test-id":"confirmation-box",children:(0,o.jsxs)(m,{children:[(0,o.jsx)(d.Z,{size:"100px",color:n.colors.primary}),(0,o.jsx)("h2",{children:s}),(0,o.jsx)("p",{children:r}),(0,o.jsxs)(p,{children:[" ",i]})]})})})}));var h=l.ZP.div(r||(r=(0,a.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: 1000;\n  top: 0;\n  left: 0;\n  background-color: ",";\n"])),(function(e){return e.theme.shades.dark[3]})),m=l.ZP.div(s||(s=(0,a.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center !important;\n  align-items: center;\n  max-width: 500px;\n  max-height: 400px;\n  height: 100%;\n  width: 100%;\n  padding: 2rem;\n  border: 1px solid rgb(237 237 237 / 20%);\n  border-radius: 1rem;\n  background-color: #fff;\n\n  h2,\n  p {\n    text-align: center;\n    margin: 0 0 1rem;\n  }\n  p {\n    font-size: 1.2rem;\n    margin-bottom: 2rem;\n  }\n  svg {\n    margin-bottom: 2rem;\n  }\n"]))),p=l.ZP.div(i||(i=(0,a.Z)(["\n  display: grid;\n  align-items: center;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 2rem;\n"])))},5260:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>Ze});var r,s,i,a,c=t(7294),l=t(6974),d=t(168),o=t(885),u=t(7484),h=t.n(u),m=t(1646),p=t.n(m),x=t(4110),f=t.n(x),j=t(9711),g=t(8804),y=t(2790),v=t(8614),b=t(8370),N=t(8739),w=t(5861),$=t(7757),Z=t.n($),M=t(9669),Y=t.n(M),k=t(3106),D=t(5438),_=t(3360),P=t(3394),z=t(5893),S=[{label:"Name",name:"name"},{label:"Email",name:"email"},{label:"User ID",name:"app_metadata.ref"}];const C=function(){var e=(0,c.useState)(S[0].name),n=(0,o.Z)(e,2),t=n[0],r=n[1],s=(0,c.useState)(0),i=(0,o.Z)(s,2),a=i[0],l=i[1],d=(0,c.useState)(""),u=(0,o.Z)(d,2),m=u[0],x=u[1],g=(0,c.useState)(void 0),$=(0,o.Z)(g,2),M=$[0],C=$[1],F={page:a,per_page:25,include_totals:!0,sort:"last_login:-1"};M&&(F.q=M);var E=function(e){var n={method:"GET",url:"/management/users",params:e},t=function(){var e=(0,w.Z)(Z().mark((function e(){var t,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y().request(n);case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.Z)(["users",e],(function(){return t()}),!0)}(F),I=E.data,A=E.isLoading,H=E.isError,R=E.isRefetching;h().extend(p()),h().extend(f()),(0,c.useEffect)((function(){x("")}),[t]);var W=function(){0!==m.length&&C(function(e){if(!m)return"";switch(e){case"name":case"email":return"".concat(e,":*").concat(m,"*");case"app_metadata.ref":return"".concat(e,':"').concat(m,'"');default:return""}}(t))},q=function(e){"next"===e&&l((function(e){return e+1})),"prev"===e&&l((function(e){return e-1}))};return(0,z.jsxs)(c.Fragment,{children:[(0,z.jsx)(v.Z,{title:"Users",border:!0}),(0,z.jsx)(O,{children:H?(0,z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,z.jsx)("h3",{children:"Failed to load Users!"})}):A?(0,z.jsxs)(_.u,{children:[(0,z.jsx)(_.$j,{type:"primary",size:"2rem"}),(0,z.jsx)(_.xg,{color:"#f08438",children:"Loading"})]}):I?(0,z.jsxs)(c.Fragment,{children:[R&&(0,z.jsx)(L,{}),(0,z.jsxs)(T,{children:[(0,z.jsx)("div",{className:"action-item",children:(0,z.jsx)(b.Z,{placeholder:"name"===t?"eg: Jhon Doe":"email"===t?"eg: jhondoe@example.com":"Search",value:m,setValue:x,handleSubmit:function(){return W()}})}),(0,z.jsx)("div",{className:"action-item",children:(0,z.jsx)(N.Z,{name:"Search By",options:S,value:t,setValue:r})}),(0,z.jsx)("div",{className:"action-item",children:(0,z.jsxs)(D.z,{btnType:"ghost",size:"lg",width:"100%",onClick:function(){return r(S[0].name),x(""),void C(void 0)},children:[(0,z.jsx)(y.Z,{size:"0.7rem"}),(0,z.jsx)("span",{style:{marginLeft:"0.5rem"},children:"Reset"})]})})]}),(0,z.jsxs)(P.bw,{children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{style:{width:"auto"},children:"Name"}),(0,z.jsx)("th",{style:{width:"15%"},children:"Provider"}),(0,z.jsx)("th",{style:{width:"15%"},children:"Logins"}),(0,z.jsx)("th",{style:{width:"15%"},children:"Last Login"}),(0,z.jsx)("th",{style:{width:"15%"},children:"Created"})]})}),(0,z.jsx)("tbody",{children:I&&I.users&&I.users.length>0&&I.users.map((function(e,n){return(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:(0,z.jsx)(j.rU,{to:"/users/".concat(e.user_id,"/details"),children:(0,z.jsxs)(P.bC,{children:[(0,z.jsx)(P.iY,{size:"40px",rounded:!0,children:e.picture&&(0,z.jsx)("img",{src:e.picture})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("b",{className:"line-clamp-1",children:e.name}),(0,z.jsx)("p",{className:"line-clamp-2",children:e.email})]})]})})}),(0,z.jsx)("td",{children:e.identities.map((function(e){return e.provider}))}),(0,z.jsx)("td",{children:e.logins_count}),(0,z.jsx)("td",{children:e.last_login&&h()(e.last_login).fromNow()}),(0,z.jsx)("td",{children:h()(e.created_at).format("DD MMM YYYY")})]},n)}))})]}),I&&I.users&&0===I.users.length?(0,z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,z.jsx)("h3",{children:"No Users!"})}):(0,z.jsxs)(U,{children:[(0,z.jsx)(D.z,{btnType:"secondary",disabled:0===a,onClick:function(){return q("prev")},children:"Previous"}),(0,z.jsx)(D.z,{btnType:"secondary",disabled:a+1>=Math.ceil(I.total/I.limit),onClick:function(){return q("next")},children:"Next"})]})]}):null})]})};var F,O=g.ZP.div(r||(r=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  position: relative;\n"]))),L=g.ZP.div(s||(s=(0,d.Z)(["\n  display: block;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  background-color: #00000017;\n"]))),T=g.ZP.div(i||(i=(0,d.Z)(["\n  display: grid;\n  grid-template-columns: 60% 30% 10%;\n  padding: 1.5rem;\n  .action-item {\n    &:not(:last-child) {\n      margin-right: 1rem;\n    }\n  }\n"]))),U=g.ZP.div(a||(a=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  button {\n    width: fit-content;\n    padding: 0 1rem;\n    margin: 0 1rem;\n  }\n"]))),E=t(3173),I=function(e){var n=e.children,t=e.border,r=void 0===t||t,s=e.style;return(0,z.jsx)(H,{className:r?"border":"",style:s,children:n})};I.Link=function(e){var n=e.children;return(0,z.jsx)("li",{children:n})};const A=I;var H=g.ZP.ul(F||(F=(0,d.Z)(["\n  display: flex;\n  padding: 0 0.875rem;\n  user-select: none;\n  &.border {\n    border-bottom: 1px solid #e2e9f3;\n  }\n  li {\n    display: flex;\n    float: left;\n    padding: 0;\n    &:not(:last-child) a {\n      margin-right: 1rem;\n    }\n    a {\n      color: #878787;\n      padding: 1.5rem 1rem 0.5rem;\n      transition: color ease-in-out 300ms;\n      &:hover {\n        color: #f08438;\n      }\n      &.active {\n        font-weight: 700;\n        color: #f08438;\n        border-bottom: 2px solid #f08438;\n      }\n    }\n  }\n  @media (max-width: 480px) {\n    justify-content: space-between;\n    li {\n      a {\n        margin: 0 0.5rem;\n        padding: 0.5rem 0;\n        font-size: 0.8rem;\n      }\n    }\n  }\n"]))),R=t(8767),W=t(3114),q=t(846),B=t(4942);function Q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function G(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(t),!0).forEach((function(n){(0,B.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var J,V,K,X,ee=t(5978);const ne=function(e){var n=e.user,t=e.localUser,r=e.roles,s=(0,c.useState)(!1),i=(0,o.Z)(s,2),a=i[0],d=i[1],u=(0,R.useQueryClient)(),m=(0,q.d)().setNotify,p=t&&t.current_subscription||null,x=(0,l.s0)();h().extend(f());var j=(0,R.useMutation)((function(e){return Y().delete("/management/user/".concat(e))}),{onSuccess:function(e){!function(e,n,t,r){if(n.data&&n.data.id){var s=n.data.id,i=t.getQueriesData(["users"]);if(i&&i.length>0){var a=i.reduce((function(e,n){var t=n[1].users;if(!t||0===t.length)return e;var r=t.findIndex((function(e){return e.app_metadata&&e.app_metadata.ref===s}));return-1===r?e:(t.splice(r,1),e={key:n[0][1],data:G(G({},n[1]),{},{users:t})})}),{key:null,data:null});a.key&&a.data&&(t.setQueryData(["users",a.key],a.data),t.removeQueries(["user",e]))}r("/users",{replace:!0})}}(n.user_id,e,u,x)},onError:function(){m({type:"danger",heading:"Err!",message:"Failed to delete user"})}});return(0,z.jsx)(c.Fragment,{children:(0,z.jsxs)(ie,{children:[(0,z.jsxs)(W.Z,{title:"Delete",msg:"Are you sure?",show:a,children:[(0,z.jsx)(D.z,{btnType:"primary",size:"lg",onClick:function(){return d(!1)},disabled:j.isLoading,children:"Cancel"}),(0,z.jsx)(D.z,{btnType:"ghost",size:"lg",onClick:function(){return a&&(e=t._id,void j.mutateAsync(e).then((function(e){return!0})).catch((function(e){return!1})));var e},disabled:j.isLoading,children:j.isLoading?(0,z.jsx)(_.$j,{size:"1.2rem",type:"white"}):"Delete"})]}),(0,z.jsx)(le,{children:(0,z.jsx)("h3",{children:"Provider Details"})}),(0,z.jsxs)(ae,{children:[(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Name"}),(0,z.jsx)("p",{className:"value",children:n.name})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Email"}),(0,z.jsx)("p",{className:"value",children:n.email}),n.email_verified&&(0,z.jsx)("p",{className:"label",children:"(Email verified)"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Auth Provider ID"}),(0,z.jsx)("p",{className:"value",children:n.user_id||"-"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Stripe Customer ID"}),(0,z.jsx)("p",{className:"value",children:t&&t.stripe&&t.stripe.customerId||"-"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Roles"}),(0,z.jsx)("p",{className:"value",children:(0,z.jsx)("span",{className:"capitalize",children:r&&r.length>0?r.map((function(e,n){return(0,z.jsxs)(c.Fragment,{children:[e.name,r.length>0&&n>=0&&n<r.length-1&&", "]},n)})):"Free"})})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Primary Identity user"}),(0,z.jsx)("p",{className:"value",children:n.identities.length>0?n.identities.map((function(e){return"google-oauth2"===e?"Google":"Auth0"})):"unknown"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Last Login"}),(0,z.jsx)("p",{className:"value",children:h()(n.last_login).format("DD MMMM YYYY, hh:mm:ss A")})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Signed Up"}),(0,z.jsx)("p",{className:"value",children:h()(n.created_at).format("DD MMMM YYYY, hh:mm:ss A")})]})]}),p&&(0,z.jsxs)(c.Fragment,{children:[(0,z.jsx)(le,{children:(0,z.jsx)("h3",{children:"Active Subscription Details"})}),(0,z.jsxs)(ae,{children:[(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:" Reference ID"}),(0,z.jsx)("p",{className:"value",children:p._id||"-"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Stripe Subscription ID"}),(0,z.jsx)("p",{className:"value",children:p.reference&&p.reference.subscription_id||"-"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Stripe Price ID"}),(0,z.jsx)("p",{className:"value",children:p.reference&&p.reference.price_id||"-"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Plan Name"}),(0,z.jsx)("p",{className:"value capitalize",children:p.name||"-"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Amount"}),(0,z.jsx)("p",{className:"value capitalize",children:p.amount&&"$".concat(p.amount," ").concat(p.currency&&p.currency.toUpperCase())||"-"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Status"}),(0,z.jsx)("p",{className:"value",children:p.status&&"active"===p.status?(0,z.jsx)(ee.C,{type:"success",size:"sm",style:{minWidth:"100px"},children:p.status}):(0,z.jsx)(ee.C,{type:"ghost",size:"sm",style:{minWidth:"100px"},children:p.status})})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Created Date"}),(0,z.jsx)("p",{className:"value",children:p.create_time&&h()(p.create_time).format("DD MMM YYYY, hh:mm a")||"-"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Next Billing Date"}),(0,z.jsx)("p",{className:"value",children:p.current_period_end&&h()(p.current_period_end).format("DD MMM YYYY, hh:mm a")||"-"})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"Current Period "}),(0,z.jsxs)("p",{className:"value",children:[p.current_period_start&&h()(p.current_period_start).format("DD MMM YYYY")||"-"," to ",p.current_period_end&&h()(p.current_period_end).format("DD MMM YYYY")||"-"]})]}),(0,z.jsxs)(ce,{children:[(0,z.jsx)("p",{className:"label",children:"End Date"}),(0,z.jsx)("p",{className:"value",children:p.ended_time&&h()(p.ended_time).format("DD MMM YYYY")||"-"})]})]})]}),(0,z.jsx)(D.z,{btnType:"danger",size:"xl",onClick:function(){return d(!0)},disabled:j.isLoading||a,children:"Permanently Delete User"})]})})};var te,re,se,ie=g.ZP.div(J||(J=(0,d.Z)(["\n  padding: 2rem;\n"]))),ae=g.ZP.div(V||(V=(0,d.Z)(["\n  display: grid;\n  max-width: 900px;\n  grid-template-columns: repeat(2, 1fr);\n  border-radius: 6px;\n  grid-row-gap: 2rem;\n  grid-column-gap: 2rem;\n  margin-bottom: 4rem;\n"]))),ce=g.ZP.div(K||(K=(0,d.Z)(["\n  p {\n    line-height: 1.7;\n    margin: 0;\n    &.label {\n      font-size: 0.875rem;\n      color: #999;\n    }\n    &.value {\n      font-size: 01rem;\n    }\n  }\n"]))),le=g.ZP.div(X||(X=(0,d.Z)(["\n  display: block;\n  align-items: center;\n  padding: 1rem 0;\n  .highlight {\n    font-weight: bold;\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.primary})),de=t(6605);const oe=function(e){var n=e.id,t=(0,c.useState)(0),r=(0,o.Z)(t,2),s=r[0],i=r[1],a=(0,l.s0)(),d=(0,de.Rj)(n,s,!!n),u=d.data,m=d.isLoading,p=d.isError,x=function(e){"next"===e&&i((function(e){return e+1})),"prev"===e&&i((function(e){return e-1}))},f=(0,z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,z.jsx)("h3",{children:"No Past Payments!"})});return n?(0,z.jsx)(c.Fragment,{children:p?(0,z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,z.jsx)("h3",{children:"Failed to load payments!"})}):m?(0,z.jsxs)(_.u,{children:[(0,z.jsx)(_.$j,{type:"primary",size:"2rem"}),(0,z.jsx)(_.xg,{color:"#f08438",children:"Loading"})]}):u&&!p?(0,z.jsx)(c.Fragment,{children:u.items&&u.items.length>0?(0,z.jsxs)(c.Fragment,{children:[(0,z.jsxs)(P.bw,{children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{style:{width:"auto"},children:"ID"}),(0,z.jsx)("th",{style:{width:"15%"},children:"Plan"}),(0,z.jsx)("th",{style:{width:"10%"},children:"Amount"}),(0,z.jsx)("th",{style:{width:"15%"},children:"Status"}),(0,z.jsx)("th",{style:{width:"18%"},children:"Card"}),(0,z.jsx)("th",{style:{width:"18%"},children:"Date"})]})}),(0,z.jsx)("tbody",{children:u.items.map((function(e,n){return(0,z.jsxs)("tr",{className:"hover",onClick:function(){return a("/payments/".concat(e.id))},children:[(0,z.jsx)("td",{children:e.id||"-"}),(0,z.jsx)("td",{className:"capitalize",children:e.plan_name||"-"}),(0,z.jsxs)("td",{children:["$",e.amount||"0.00"," ",e.currency&&e.currency]}),(0,z.jsx)("td",{className:"capitalize",children:e.refunded?(0,z.jsxs)(me,{children:[(0,z.jsx)(ee.C,{type:"ghost",size:"sm",children:"Refunded"}),(0,z.jsxs)("span",{className:"redund-amt",children:["$",e.amount_refunded||"0.00"," refunded"]})]}):e.amount_refunded>0?(0,z.jsxs)(me,{children:[(0,z.jsx)(ee.C,{type:"ghost",size:"sm",children:"Partial Refund"}),(0,z.jsxs)("span",{className:"redund-amt",children:["$",e.amount_refunded," refunded"]})]}):(0,z.jsx)(ee.C,{size:"sm",type:"succeeded"===e.status?"success":"cancelled"===e.status?"ghost":"failed"===e.status?"danger":"info",children:e.status})}),(0,z.jsx)("td",{children:(0,z.jsxs)(he,{children:[e.method.brand&&e.method.brand,(0,z.jsx)("span",{className:"dot"}),(0,z.jsx)("span",{className:"dot"}),(0,z.jsx)("span",{className:"dot"}),(0,z.jsx)("span",{className:"dot"}),(0,z.jsx)("span",{className:"dot"}),e.method.last4]})}),(0,z.jsx)("td",{children:h()(e.date).format("DD MMM YYYY, hh:mm a")})]},n)}))})]}),(0,z.jsxs)(pe,{children:[(0,z.jsx)(D.z,{btnType:"secondary",disabled:0===s,onClick:function(){return x("prev")},children:"Previous"}),(0,z.jsx)(D.z,{btnType:"secondary",disabled:!u.has_more,onClick:function(){return x("next")},children:"Next"})]})]}):f}):null}):f};var ue,he=g.ZP.div(te||(te=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  text-transform: capitalize;\n  .dot {\n    width: 4px;\n    height: 4px;\n    border-radius: 50%;\n    background-color: #777;\n    margin-right: 2px;\n    &:first-child {\n      margin-left: 10px;\n    }\n    &:last-child {\n      margin-right: 5px;\n    }\n  }\n"]))),me=g.ZP.div(re||(re=(0,d.Z)(["\n  display: block;\n  align-items: center;\n  .redund-amt {\n    display: block;\n    font-size: 0.7rem;\n    margin-top: 0.3rem;\n  }\n"]))),pe=g.ZP.div(se||(se=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  button {\n    width: fit-content;\n    padding: 0 1rem;\n    margin: 0 1rem;\n  }\n"]))),xe=t(673);const fe=function(e){var n=e.id,t=(0,c.useState)(0),r=(0,o.Z)(t,2),s=r[0],i=r[1],a=(0,l.s0)(),d={q:'user_id:"'.concat(n,'"'),page:s,limit:20},u=(0,xe.t)(d,!!n),m=u.data,p=u.isLoading,x=u.isError,f=(0,z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,z.jsx)("h3",{children:"No memberships!"})}),j=function(e){"next"===e&&i((function(e){return e+1})),"prev"===e&&i((function(e){return e-1}))};return n?(0,z.jsx)(c.Fragment,{children:x?(0,z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,z.jsx)("h3",{children:"Failed to load memberships!"})}):p?(0,z.jsxs)(_.u,{children:[(0,z.jsx)(_.$j,{type:"primary",size:"2rem"}),(0,z.jsx)(_.xg,{color:"#f08438",children:"Loading"})]}):m?(0,z.jsx)(c.Fragment,{children:0===m.items.length?f:(0,z.jsxs)(c.Fragment,{children:[(0,z.jsxs)(P.bw,{className:"mb-4",borderTop:!1,children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{style:{width:"25%"},children:"ID"}),(0,z.jsx)("th",{style:{width:"auto"},children:"Plan Name"}),(0,z.jsx)("th",{style:{width:"10%"},children:"Amount"}),(0,z.jsx)("th",{style:{width:"15%"},children:"Status"}),(0,z.jsx)("th",{style:{width:"15%"},children:"Created"}),(0,z.jsx)("th",{style:{width:"15%"},children:"Ended"})]})}),(0,z.jsx)("tbody",{children:m.items&&m.items.length>0&&m.items.map((function(e,n){return(0,z.jsxs)("tr",{className:"hover",onClick:function(){return a("/subscriptions/".concat(e._id))},children:[(0,z.jsx)("td",{children:e._id}),(0,z.jsxs)("td",{className:"capitalize",children:[e.name||"Unknown"," plan"]}),(0,z.jsxs)("td",{children:["$",e.amount||"0.00"," ",e.currency&&e.currency.toUpperCase()]}),(0,z.jsx)("td",{className:"capitalize",children:e.status&&"active"===e.status?(0,z.jsx)(ee.C,{type:"success",size:"sm",style:{minWidth:"100px"},children:e.status}):(0,z.jsx)(ee.C,{type:"ghost",size:"sm",style:{minWidth:"100px"},children:e.status})}),(0,z.jsx)("td",{children:e.create_time?h()(e.create_time).format("DD MMM YYYY"):"-"}),(0,z.jsx)("td",{children:e.ended_time?h()(e.ended_time).format("DD MMM YYYY"):"-"})]},n)}))})]}),(0,z.jsxs)(ve,{children:[(0,z.jsx)(D.z,{btnType:"secondary",disabled:0===s,onClick:function(){return j("prev")},children:"Previous"}),(0,z.jsx)(D.z,{btnType:"secondary",disabled:s+1>=Math.ceil(m.total/m.limit),onClick:function(){return j("next")},children:"Next"})]})]})}):null}):f};var je,ge,ye,ve=g.ZP.div(ue||(ue=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n\n  button {\n    width: fit-content;\n    padding: 0 1rem;\n    margin: 0 1rem;\n  }\n"])));const be=function(){var e,n,t,r=(0,l.UO)(),s=r.user_id,i=r.type,a=(0,l.s0)(),d=(e=s||"",n=!!s,t=function(){var e=(0,w.Z)(Z().mark((function e(n){var t,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y().get("/management/user/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),(0,k.Z)(["user",e],(function(){return t(e)}),n)),o=d.data,u=d.isLoading,h=d.isError,m=function(e){a("/users/".concat(s,"/").concat(e))};return(0,z.jsx)(c.Fragment,{children:!s||h?(0,z.jsx)("div",{className:"align-center",style:{height:"30vh"},children:(0,z.jsx)("h3",{children:"Failed to load user data!"})}):u?(0,z.jsxs)(_.u,{children:[(0,z.jsx)(_.$j,{type:"primary",size:"2rem"}),(0,z.jsx)(_.xg,{color:"#f08438",children:"Loading"})]}):o&&o.user?(0,z.jsxs)(Ne,{children:[(0,z.jsx)("div",{style:{padding:"0 1.5rem"},children:(0,z.jsx)(D.z,{btnType:"ghost",size:"lg",style:{width:"fit-content",padding:"0 1rem"},onClick:function(){return a("/users")},children:(0,z.jsx)(E.Z,{size:"1.4rem"})})}),(0,z.jsxs)(we,{children:[(0,z.jsx)("div",{className:"thumbnail",children:(0,z.jsx)("img",{src:o.user.picture})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{children:o.user.name}),(0,z.jsxs)("p",{children:["User ID:  ",o.user.app_metadata&&o.user.app_metadata.ref||"-"]})]})]}),(0,z.jsxs)(A,{children:[(0,z.jsx)(A.Link,{children:(0,z.jsx)("a",{onClick:function(){return m("details")},className:"details"===i?"active":"",children:"Details"})}),(0,z.jsx)(A.Link,{children:(0,z.jsx)("a",{onClick:function(){return m("subscriptions")},className:"subscriptions"===i?"active":"",children:"Subscriptions"})}),(0,z.jsx)(A.Link,{children:(0,z.jsx)("a",{onClick:function(){return m("payments")},className:"payments"===i?"active":"",children:"Payments"})})]}),(0,z.jsx)($e,{children:"details"===i?(0,z.jsx)(ne,{user:o.user,localUser:o.localUser,roles:o.roles}):"subscriptions"===i?(0,z.jsx)(fe,{id:o.localUser._id}):"payments"===i?(0,z.jsx)(oe,{id:o.localUser._id}):null})]}):null})};var Ne=g.ZP.div(je||(je=(0,d.Z)(["\n  padding: 2rem 0;\n  height: 100%;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n"]))),we=g.ZP.div(ge||(ge=(0,d.Z)(["\n  padding: 1.5rem;\n  display: flex;\n  align-items: center;\n  div {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    h2,\n    p {\n      margin: 0 0 0.5rem;\n    }\n  }\n  .thumbnail {\n    display: flex;\n    width: 75px;\n    height: 75px;\n    border-radius: 50%;\n    overflow: hidden;\n    margin-right: 1.5rem;\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n"]))),$e=g.ZP.div(ye||(ye=(0,d.Z)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n"])));const Ze=function(){var e=(0,l.TH)().pathname;return(0,z.jsx)(c.Fragment,{children:(0,z.jsxs)(l.Z5,{children:[(0,z.jsx)(l.AW,{path:"/",element:(0,z.jsx)(C,{})}),(0,z.jsx)(l.AW,{path:"/:user_id",element:(0,z.jsx)(l.Fg,{to:e+"/details",replace:!0})}),(0,z.jsx)(l.AW,{path:"/:user_id/:type",element:(0,z.jsx)(be,{})})]})})}},6605:(e,n,t)=>{"use strict";t.d(n,{Rj:()=>d,Rt:()=>u,_P:()=>o});var r=t(5861),s=t(7757),i=t.n(s),a=t(9669),c=t.n(a),l=t(3106),d=function(e,n,t){var s=function(){var e=(0,r.Z)(i().mark((function e(t){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("/management/payments/user/".concat(t),{params:{page:n}});case 2:return r=e.sent,s=r.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,l.Z)(["payments",{userId:e,page:n}],(function(){return s(e)}),t)},o=function(e,n,t,s){var a=function(){var e=(0,r.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("/management/payments/search",{params:t});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.Z)(["payments",{q:t.q,cacheRef:n,page:e}],(function(){return a()}),s)},u=function(e,n){var t=function(){var e=(0,r.Z)(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("/management/payments/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,l.Z)(["payment",e],(function(){return t(e)}),n)}},673:(e,n,t)=>{"use strict";t.d(n,{b:()=>o,t:()=>d});var r=t(5861),s=t(7757),i=t.n(s),a=t(9669),c=t.n(a),l=t(3106),d=function(e,n){var t=function(){var n=(0,r.Z)(i().mark((function n(){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("/management/subscriptions",{params:e});case 2:return t=n.sent,r=t.data,n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,l.Z)(["subscriptions",{params:e}],(function(){return t()}),n)},o=function(e,n){var t=function(){var e=(0,r.Z)(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("/management/subscriptions/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,l.Z)(["subscription",e],(function(){return t(e)}),n)}},1646:function(e){e.exports=function(){"use strict";var e,n,t=1e3,r=6e4,s=36e5,i=864e5,a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,l=2592e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,o={years:c,months:l,days:i,hours:s,minutes:r,seconds:t,milliseconds:1,weeks:6048e5},u=function(e){return e instanceof g},h=function(e,n,t){return new g(e,t,n.$l)},m=function(e){return n.p(e)+"s"},p=function(e){return e<0},x=function(e){return p(e)?Math.ceil(e):Math.floor(e)},f=function(e){return Math.abs(e)},j=function(e,n){return e?p(e)?{negative:!0,format:""+f(e)+n}:{negative:!1,format:""+e+n}:{negative:!1,format:""}},g=function(){function p(e,n,t){var r=this;if(this.$d={},this.$l=t,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),n)return h(e*o[m(n)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach((function(n){r.$d[m(n)]=e[n]})),this.calMilliseconds(),this;if("string"==typeof e){var s=e.match(d);if(s){var i=s.slice(2).map((function(e){return null!=e?Number(e):0}));return this.$d.years=i[0],this.$d.months=i[1],this.$d.weeks=i[2],this.$d.days=i[3],this.$d.hours=i[4],this.$d.minutes=i[5],this.$d.seconds=i[6],this.calMilliseconds(),this}}return this}var f=p.prototype;return f.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(n,t){return n+(e.$d[t]||0)*o[t]}),0)},f.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=x(e/c),e%=c,this.$d.months=x(e/l),e%=l,this.$d.days=x(e/i),e%=i,this.$d.hours=x(e/s),e%=s,this.$d.minutes=x(e/r),e%=r,this.$d.seconds=x(e/t),e%=t,this.$d.milliseconds=e},f.toISOString=function(){var e=j(this.$d.years,"Y"),n=j(this.$d.months,"M"),t=+this.$d.days||0;this.$d.weeks&&(t+=7*this.$d.weeks);var r=j(t,"D"),s=j(this.$d.hours,"H"),i=j(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var c=j(a,"S"),l=e.negative||n.negative||r.negative||s.negative||i.negative||c.negative,d=s.format||i.format||c.format?"T":"",o=(l?"-":"")+"P"+e.format+n.format+r.format+d+s.format+i.format+c.format;return"P"===o||"-P"===o?"P0D":o},f.toJSON=function(){return this.toISOString()},f.format=function(e){var t=e||"YYYY-MM-DDTHH:mm:ss",r={Y:this.$d.years,YY:n.s(this.$d.years,2,"0"),YYYY:n.s(this.$d.years,4,"0"),M:this.$d.months,MM:n.s(this.$d.months,2,"0"),D:this.$d.days,DD:n.s(this.$d.days,2,"0"),H:this.$d.hours,HH:n.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:n.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:n.s(this.$d.seconds,2,"0"),SSS:n.s(this.$d.milliseconds,3,"0")};return t.replace(a,(function(e,n){return n||String(r[e])}))},f.as=function(e){return this.$ms/o[m(e)]},f.get=function(e){var n=this.$ms,t=m(e);return"milliseconds"===t?n%=1e3:n="weeks"===t?x(n/o[t]):this.$d[t],0===n?0:n},f.add=function(e,n,t){var r;return r=n?e*o[m(n)]:u(e)?e.$ms:h(e,this).$ms,h(this.$ms+r*(t?-1:1),this)},f.subtract=function(e,n){return this.add(e,n,!0)},f.locale=function(e){var n=this.clone();return n.$l=e,n},f.clone=function(){return h(this.$ms,this)},f.humanize=function(n){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!n)},f.milliseconds=function(){return this.get("milliseconds")},f.asMilliseconds=function(){return this.as("milliseconds")},f.seconds=function(){return this.get("seconds")},f.asSeconds=function(){return this.as("seconds")},f.minutes=function(){return this.get("minutes")},f.asMinutes=function(){return this.as("minutes")},f.hours=function(){return this.get("hours")},f.asHours=function(){return this.as("hours")},f.days=function(){return this.get("days")},f.asDays=function(){return this.as("days")},f.weeks=function(){return this.get("weeks")},f.asWeeks=function(){return this.as("weeks")},f.months=function(){return this.get("months")},f.asMonths=function(){return this.as("months")},f.years=function(){return this.get("years")},f.asYears=function(){return this.as("years")},p}();return function(t,r,s){e=s,n=s().$utils(),s.duration=function(e,n){var t=s.locale();return h(e,{$l:t},n)},s.isDuration=u;var i=r.prototype.add,a=r.prototype.subtract;r.prototype.add=function(e,n){return u(e)&&(e=e.asMilliseconds()),i.bind(this)(e,n)},r.prototype.subtract=function(e,n){return u(e)&&(e=e.asMilliseconds()),a.bind(this)(e,n)}}}()},4110:function(e){e.exports=function(){"use strict";return function(e,n,t){e=e||{};var r=n.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,n,t,s){return r.fromToBase(e,n,t,s)}t.en.relativeTime=s,r.fromToBase=function(n,r,i,a,c){for(var l,d,o,u=i.$locale().relativeTime||s,h=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],m=h.length,p=0;p<m;p+=1){var x=h[p];x.d&&(l=a?t(n).diff(i,x.d,!0):i.diff(n,x.d,!0));var f=(e.rounding||Math.round)(Math.abs(l));if(o=l>0,f<=x.r||!x.r){f<=1&&p>0&&(x=h[p-1]);var j=u[x.l];c&&(f=c(""+f)),d="string"==typeof j?j.replace("%d",f):j(f,r,x.l,o);break}}if(r)return d;var g=o?u.future:u.past;return"function"==typeof g?g(d):g.replace("%s",d)},r.to=function(e,n){return i(e,n,this,!0)},r.from=function(e,n){return i(e,n,this)};var a=function(e){return e.$u?t.utc():t()};r.toNow=function(e){return this.to(a(this),e)},r.fromNow=function(e){return this.from(a(this),e)}}}()}}]);
//# sourceMappingURL=260.bundle.js.map